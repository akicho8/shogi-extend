require File.expand_path('../../../config/environment', __FILE__) if $0 == __FILE__

class UserProfileSerializer < SimpleUserSerializer
  has_many :battle_rooms do
    object.battle_rooms.latest_list_for_profile
  end

  class BattleRoomSerializer < ApplicationSerializer
    attributes :name, :show_path
    attributes :win_location_key
    attributes :begin_at, :end_at
    attributes :xstate_info, :turn_max

    always_include :memberships
    has_many :memberships

    class MembershipSerializer < ApplicationSerializer
      attributes :location_key

      always_include :user
      belongs_to :user, serializer: SimpleUserSerializer
    end
  end
end

if $0 == __FILE__
  pp ams_sr(User.first, include: {battle_rooms: {memberships: :user}}, serializer: UserProfileSerializer)
end
# >> I, [2018-06-12T19:59:14.193060 #36638]  INFO -- : Rendered UserProfileSerializer with ActiveModelSerializers::Adapter::Attributes (2776.64ms)
# >> {:id=>1,
# >>  :name=>"野良1号",
# >>  :show_path=>"/online/users/1",
# >>  :avatar_url=>
# >>   "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png",
# >>  :battle_rooms=>
# >>   [{:id=>31,
# >>     :name=>"#31",
# >>     :show_path=>"/online/battles/31",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>121,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>122,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>9,
# >>          :name=>"野良9号",
# >>          :show_path=>"/online/users/9",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0009_fallback_face_icon-503ddf1bd84dcf9df26a4d33a5400764ba760075823365979e20c5bd17211e54.png"}},
# >>       {:id=>123,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>4,
# >>          :name=>"野良4号",
# >>          :show_path=>"/online/users/4",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0004_fallback_face_icon-60d0ee5b89cc9af1271916611c205c0f7d5011e47fa0aad9331a019f7f0d531c.png"}},
# >>       {:id=>124,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}}]},
# >>    {:id=>13,
# >>     :name=>"#13",
# >>     :show_path=>"/online/battles/13",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>49,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>50,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>51,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>6,
# >>          :name=>"野良6号",
# >>          :show_path=>"/online/users/6",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0006_fallback_face_icon-dcac8e0f473d06b96f052d464272bd7a5c048461f6abadc1cf54dfa311d77581.png"}},
# >>       {:id=>52,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>4,
# >>          :name=>"野良4号",
# >>          :show_path=>"/online/users/4",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0004_fallback_face_icon-60d0ee5b89cc9af1271916611c205c0f7d5011e47fa0aad9331a019f7f0d531c.png"}}]},
# >>    {:id=>14,
# >>     :name=>"#14",
# >>     :show_path=>"/online/battles/14",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>53,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>54,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}},
# >>       {:id=>55,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>7,
# >>          :name=>"野良7号",
# >>          :show_path=>"/online/users/7",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0007_fallback_face_icon-f4865abaf4bbe1d91c592f11e5e78d97abcc7f76e4273e7d7995796b684cdba6.png"}},
# >>       {:id=>56,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>2,
# >>          :name=>"野良2号",
# >>          :show_path=>"/online/users/2",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0002_fallback_face_icon-41f850da24dfc62d55b5cf6c99694552aaab1a61aaee8404fc20321364e7a3cf.png"}}]},
# >>    {:id=>23,
# >>     :name=>"#23",
# >>     :show_path=>"/online/battles/23",
# >>     :win_location_key=>nil,
# >>     :begin_at=>Tue, 12 Jun 2018 19:53:10 JST +09:00,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0838
# >>       @attributes=
# >>        {:key=>:st_battling,
# >>         :name=>"対局中",
# >>         :color=>"has-text-danger",
# >>         :code=>1}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>89,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>90,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>91,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>92,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}}]},
# >>    {:id=>33,
# >>     :name=>"#33",
# >>     :show_path=>"/online/battles/33",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>129,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>6,
# >>          :name=>"野良6号",
# >>          :show_path=>"/online/users/6",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0006_fallback_face_icon-dcac8e0f473d06b96f052d464272bd7a5c048461f6abadc1cf54dfa311d77581.png"}},
# >>       {:id=>130,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>131,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>132,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}}]},
# >>    {:id=>39,
# >>     :name=>"#39",
# >>     :show_path=>"/online/battles/39",
# >>     :win_location_key=>nil,
# >>     :begin_at=>Tue, 12 Jun 2018 19:53:10 JST +09:00,
# >>     :end_at=>Tue, 12 Jun 2018 19:53:10 JST +09:00,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b06f8
# >>       @attributes={:key=>:st_done, :name=>"終局", :color=>"", :code=>2}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>153,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}},
# >>       {:id=>154,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>155,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>156,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}}]},
# >>    {:id=>3,
# >>     :name=>"#3",
# >>     :show_path=>"/online/battles/3",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>9,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>2,
# >>          :name=>"野良2号",
# >>          :show_path=>"/online/users/2",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0002_fallback_face_icon-41f850da24dfc62d55b5cf6c99694552aaab1a61aaee8404fc20321364e7a3cf.png"}},
# >>       {:id=>10,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>11,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>12,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>9,
# >>          :name=>"野良9号",
# >>          :show_path=>"/online/users/9",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0009_fallback_face_icon-503ddf1bd84dcf9df26a4d33a5400764ba760075823365979e20c5bd17211e54.png"}}]},
# >>    {:id=>6,
# >>     :name=>"#6",
# >>     :show_path=>"/online/battles/6",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>21,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>6,
# >>          :name=>"野良6号",
# >>          :show_path=>"/online/users/6",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0006_fallback_face_icon-dcac8e0f473d06b96f052d464272bd7a5c048461f6abadc1cf54dfa311d77581.png"}},
# >>       {:id=>22,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>23,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}},
# >>       {:id=>24,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>4,
# >>          :name=>"野良4号",
# >>          :show_path=>"/online/users/4",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0004_fallback_face_icon-60d0ee5b89cc9af1271916611c205c0f7d5011e47fa0aad9331a019f7f0d531c.png"}}]},
# >>    {:id=>28,
# >>     :name=>"#28",
# >>     :show_path=>"/online/battles/28",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>109,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>2,
# >>          :name=>"野良2号",
# >>          :show_path=>"/online/users/2",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0002_fallback_face_icon-41f850da24dfc62d55b5cf6c99694552aaab1a61aaee8404fc20321364e7a3cf.png"}},
# >>       {:id=>110,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>111,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>112,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}}]},
# >>    {:id=>30,
# >>     :name=>"#30",
# >>     :show_path=>"/online/battles/30",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>117,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}},
# >>       {:id=>118,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>4,
# >>          :name=>"野良4号",
# >>          :show_path=>"/online/users/4",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0004_fallback_face_icon-60d0ee5b89cc9af1271916611c205c0f7d5011e47fa0aad9331a019f7f0d531c.png"}},
# >>       {:id=>119,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}},
# >>       {:id=>120,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>7,
# >>          :name=>"野良7号",
# >>          :show_path=>"/online/users/7",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0007_fallback_face_icon-f4865abaf4bbe1d91c592f11e5e78d97abcc7f76e4273e7d7995796b684cdba6.png"}}]},
# >>    {:id=>19,
# >>     :name=>"#19",
# >>     :show_path=>"/online/battles/19",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>73,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>6,
# >>          :name=>"野良6号",
# >>          :show_path=>"/online/users/6",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0006_fallback_face_icon-dcac8e0f473d06b96f052d464272bd7a5c048461f6abadc1cf54dfa311d77581.png"}},
# >>       {:id=>74,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>75,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>9,
# >>          :name=>"野良9号",
# >>          :show_path=>"/online/users/9",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0009_fallback_face_icon-503ddf1bd84dcf9df26a4d33a5400764ba760075823365979e20c5bd17211e54.png"}},
# >>       {:id=>76,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]},
# >>    {:id=>26,
# >>     :name=>"#26",
# >>     :show_path=>"/online/battles/26",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>101,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}},
# >>       {:id=>102,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>7,
# >>          :name=>"野良7号",
# >>          :show_path=>"/online/users/7",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0007_fallback_face_icon-f4865abaf4bbe1d91c592f11e5e78d97abcc7f76e4273e7d7995796b684cdba6.png"}},
# >>       {:id=>103,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>104,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]},
# >>    {:id=>32,
# >>     :name=>"#32",
# >>     :show_path=>"/online/battles/32",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>125,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>10,
# >>          :name=>"野良10号",
# >>          :show_path=>"/online/users/10",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0010_fallback_face_icon-2d78a23f5dcbce94503a8c86ebb541a45db7a9955234eef64f6ca55d729d9014.png"}},
# >>       {:id=>126,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}},
# >>       {:id=>127,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>9,
# >>          :name=>"野良9号",
# >>          :show_path=>"/online/users/9",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0009_fallback_face_icon-503ddf1bd84dcf9df26a4d33a5400764ba760075823365979e20c5bd17211e54.png"}},
# >>       {:id=>128,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]},
# >>    {:id=>34,
# >>     :name=>"#34",
# >>     :show_path=>"/online/battles/34",
# >>     :win_location_key=>nil,
# >>     :begin_at=>Tue, 12 Jun 2018 19:53:10 JST +09:00,
# >>     :end_at=>Tue, 12 Jun 2018 19:53:10 JST +09:00,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b06f8
# >>       @attributes={:key=>:st_done, :name=>"終局", :color=>"", :code=>2}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>133,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>6,
# >>          :name=>"野良6号",
# >>          :show_path=>"/online/users/6",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0006_fallback_face_icon-dcac8e0f473d06b96f052d464272bd7a5c048461f6abadc1cf54dfa311d77581.png"}},
# >>       {:id=>134,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>135,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>5,
# >>          :name=>"野良5号",
# >>          :show_path=>"/online/users/5",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0005_fallback_face_icon-23fef5e29f1f1e7a094d51913455532d6c7b47fd86af129ecdfde9b1f11ea6d3.png"}},
# >>       {:id=>136,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]},
# >>    {:id=>43,
# >>     :name=>"#43",
# >>     :show_path=>"/online/battles/43",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>169,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>7,
# >>          :name=>"野良7号",
# >>          :show_path=>"/online/users/7",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0007_fallback_face_icon-f4865abaf4bbe1d91c592f11e5e78d97abcc7f76e4273e7d7995796b684cdba6.png"}},
# >>       {:id=>170,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>171,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}},
# >>       {:id=>172,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]},
# >>    {:id=>5,
# >>     :name=>"#5",
# >>     :show_path=>"/online/battles/5",
# >>     :win_location_key=>nil,
# >>     :begin_at=>nil,
# >>     :end_at=>nil,
# >>     :xstate_info=>
# >>      #<XstateInfo:0x00007fc2c98b0950
# >>       @attributes=
# >>        {:key=>:st_before, :name=>"開始前", :color=>"has-text-success", :code=>0}>,
# >>     :turn_max=>0,
# >>     :memberships=>
# >>      [{:id=>17,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>8,
# >>          :name=>"野良8号",
# >>          :show_path=>"/online/users/8",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0008_fallback_face_icon-fdb3f4b4f7d685257d6f0c141e0e7274c831d78c666c981d6871dcaadd4005b5.png"}},
# >>       {:id=>18,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>7,
# >>          :name=>"野良7号",
# >>          :show_path=>"/online/users/7",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0007_fallback_face_icon-f4865abaf4bbe1d91c592f11e5e78d97abcc7f76e4273e7d7995796b684cdba6.png"}},
# >>       {:id=>19,
# >>        :location_key=>"black",
# >>        :user=>
# >>         {:id=>3,
# >>          :name=>"野良3号",
# >>          :show_path=>"/online/users/3",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0003_fallback_face_icon-c9d62836ef5033a7019edd5d300b8c77b72d4388abc5233772ffd04f0652907b.png"}},
# >>       {:id=>20,
# >>        :location_key=>"white",
# >>        :user=>
# >>         {:id=>1,
# >>          :name=>"野良1号",
# >>          :show_path=>"/online/users/1",
# >>          :avatar_url=>
# >>           "/assets/fallback_icons/0001_fallback_face_icon-284f2a88b11d10910bdb24966f6febeaaf7f38678452998c949b8aa69a101221.png"}}]}]}
