#!/usr/bin/env ruby
require File.expand_path('../../config/environment', __FILE__)

ENV["SLACK_AGENT_DISABLE"] = "1"

Colosseum::User.destroy_all
Colosseum::Battle.destroy_all

user1 = Colosseum::User.create!
user2 = Colosseum::User.create!
battle = Colosseum::Battle.create!
battle.users << user1
battle.users << user2
battle.battle_start

tp Colosseum::Battle.all
Colosseum::Battle.auto_close(time: 0)
tp Colosseum::Battle.all

tp Colosseum::User.all
tp Colosseum::Membership.all

# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+--------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> | id | black_preset_key | white_preset_key | lifetime_key | team_key   | full_sfen                                                                     | clock_counts             | countdown_flags                | turn_max | battle_request_at | auto_matched_at | begin_at                  | end_at | last_action_key | win_location_key | memberships_count | watch_ships_count | created_at                | updated_at                |
# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+--------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> | 66 | 平手             | 平手             | lifetime_m10 | team_p1vs1 | position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1 | {:black=>[], :white=>[]} | {:black=>false, :white=>false} |        0 |                   |                 | 2019-05-27 18:44:47 +0900 |        |                 |                  |                 2 |                 0 | 2019-05-27 18:44:47 +0900 | 2019-05-27 18:44:47 +0900 |
# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+--------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+---------------------------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> | id | black_preset_key | white_preset_key | lifetime_key | team_key   | full_sfen                                                                     | clock_counts             | countdown_flags                | turn_max | battle_request_at | auto_matched_at | begin_at                  | end_at                    | last_action_key | win_location_key | memberships_count | watch_ships_count | created_at                | updated_at                |
# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+---------------------------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> | 66 | 平手             | 平手             | lifetime_m10 | team_p1vs1 | position sfen lnsgkgsnl/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL b - 1 | {:black=>[], :white=>[]} | {:black=>false, :white=>false} |        0 |                   |                 | 2019-05-27 18:44:47 +0900 | 2019-05-27 18:44:47 +0900 |                 |                  |                 2 |                 0 | 2019-05-27 18:44:47 +0900 | 2019-05-27 18:44:47 +0900 |
# >> |----+------------------+------------------+--------------+------------+-------------------------------------------------------------------------------+--------------------------+--------------------------------+----------+-------------------+-----------------+---------------------------+---------------------------+-----------------+------------------+-------------------+-------------------+---------------------------+---------------------------|
# >> |----+----------------------------------+-----------------+---------------------------+-------------+-------------+---------------+------------+----------+---------------------------+---------------------------+--------------------------------------------+--------------------------------------------------------------+----------------------+------------------------+---------------------+---------------+--------------------+-----------------+--------------------+-----------------+--------------------+--------------+----------------------+-------------------+-----------------+--------------+-----------|
# >> | id | key                              | name            | joined_at                 | fighting_at | matching_at | cpu_brain_key | user_agent | race_key | created_at                | updated_at                | email                                      | encrypted_password                                           | reset_password_token | reset_password_sent_at | remember_created_at | sign_in_count | current_sign_in_at | last_sign_in_at | current_sign_in_ip | last_sign_in_ip | confirmation_token | confirmed_at | confirmation_sent_at | unconfirmed_email | failed_attempts | unlock_token | locked_at |
# >> |----+----------------------------------+-----------------+---------------------------+-------------+-------------+---------------+------------+----------+---------------------------+---------------------------+--------------------------------------------+--------------------------------------------------------------+----------------------+------------------------+---------------------+---------------+--------------------+-----------------+--------------------+-----------------+--------------------+--------------+----------------------+-------------------+-----------------+--------------+-----------|
# >> | 41 | 51befe24073db4b7c5882183e37f2512 | 名無しの棋士1号 | 2019-05-27 18:44:46 +0900 |             |             |               |            | human    | 2019-05-27 18:44:46 +0900 | 2019-05-27 18:44:46 +0900 | 51befe24073db4b7c5882183e37f2512@localhost | $2a$11$2.195TRV31kJ7WdDIUCKF.3IFrCZrxVIpymkzmanIhdT.bzcllKJi |                      |                        |                     |             0 |                    |                 |                    |                 |                    |              |                      |                   |               0 |              |           |
# >> | 42 | 56c94bc7506f0414ad3f5ebeb7300407 | 名無しの棋士2号 | 2019-05-27 18:44:46 +0900 |             |             |               |            | human    | 2019-05-27 18:44:46 +0900 | 2019-05-27 18:44:46 +0900 | 56c94bc7506f0414ad3f5ebeb7300407@localhost | $2a$11$mzCMVnP3OLWett5ja1ZsLu9ajxhgHrnzOvN2MaELcZUfHEBev.Pby |                      |                        |                     |             0 |                    |                 |                    |                 |                    |              |                      |                   |               0 |              |           |
# >> |----+----------------------------------+-----------------+---------------------------+-------------+-------------+---------------+------------+----------+---------------------------+---------------------------+--------------------------------------------+--------------------------------------------------------------+----------------------+------------------------+---------------------+---------------+--------------------+-----------------+--------------------+-----------------+--------------------+--------------+----------------------+-------------------+-----------------+--------------+-----------|
# >> |-----+-----------+---------+------------+--------------+----------+------------+-------------+------------+---------------------------+---------------------------|
# >> | id  | battle_id | user_id | preset_key | location_key | position | standby_at | fighting_at | time_up_at | created_at                | updated_at                |
# >> |-----+-----------+---------+------------+--------------+----------+------------+-------------+------------+---------------------------+---------------------------|
# >> | 229 |        66 |      41 | 平手       | black        |        0 |            |             |            | 2019-05-27 18:44:47 +0900 | 2019-05-27 18:44:47 +0900 |
# >> | 230 |        66 |      42 | 平手       | white        |        1 |            |             |            | 2019-05-27 18:44:47 +0900 | 2019-05-27 18:44:47 +0900 |
# >> |-----+-----------+---------+------------+--------------+----------+------------+-------------+------------+---------------------------+---------------------------|
