#!/usr/bin/env ruby
require File.expand_path('../../config/environment', __FILE__)

user1 = Swars::User.create!
user2 = Swars::User.create!
battle = Swars::Battle.create! do |e|
  e.memberships.build(user: user1)
  e.memberships.build(user: user2)
end

tp battle
tp battle.memberships
# >> |--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> |                 id | 79                                                                                                                                                                                                                                                                                                                                          |
# >> |                key | battle79                                                                                                                                                                                                                                                                                                                                    |
# >> |         battled_at | 2020-03-29 22:45:08 +0900                                                                                                                                                                                                                                                                                                                   |
# >> |           rule_key | ten_min                                                                                                                                                                                                                                                                                                                                     |
# >> |            csa_seq | [["+7968GI", 599], ["-8232HI", 597], ["+5756FU", 594], ["-3334FU", 590], ["+6857GI", 592]]                                                                                                                                                                                                                                                  |
# >> |          final_key | TORYO                                                                                                                                                                                                                                                                                                                                       |
# >> |        win_user_id | 115                                                                                                                                                                                                                                                                                                                                         |
# >> |           turn_max | 5                                                                                                                                                                                                                                                                                                                                           |
# >> |          meta_info | {:header=>{"先手"=>"user115 30級", "後手"=>"user116 30級", "開始日時"=>"2020/03/29 22:45:08", "棋戦"=>"将棋ウォーズ(10分切れ負け)", "場所"=>"https://shogiwars.heroz.jp/games/battle79", "持ち時間"=>"00:10+00", "先手の戦型"=>"嬉野流", "後手の戦型"=>"△３ニ飛戦法", "先手の備考"=>"居飛車, 対振り, 対抗型, 居玉, 相居玉", "後手の備考... |
# >> |        accessed_at | 2020-03-29 22:45:08 +0900                                                                                                                                                                                                                                                                                                                   |
# >> |      outbreak_turn |                                                                                                                                                                                                                                                                                                                                             |
# >> |         created_at | 2020-03-29 22:45:08 +0900                                                                                                                                                                                                                                                                                                                   |
# >> |         updated_at | 2020-03-29 22:45:08 +0900                                                                                                                                                                                                                                                                                                                   |
# >> |         preset_key | 平手                                                                                                                                                                                                                                                                                                                                        |
# >> |         start_turn |                                                                                                                                                                                                                                                                                                                                             |
# >> |      critical_turn |                                                                                                                                                                                                                                                                                                                                             |
# >> |         saturn_key | public                                                                                                                                                                                                                                                                                                                                      |
# >> |          sfen_body | position startpos moves 7i6h 8b3b 5g5f 3c3d 6h5g                                                                                                                                                                                                                                                                                            |
# >> |         image_turn |                                                                                                                                                                                                                                                                                                                                             |
# >> |          sfen_hash | 3867ed2691237d42c7df0bd43fbb5661                                                                                                                                                                                                                                                                                                            |
# >> |   defense_tag_list |                                                                                                                                                                                                                                                                                                                                             |
# >> |    attack_tag_list |                                                                                                                                                                                                                                                                                                                                             |
# >> | technique_tag_list |                                                                                                                                                                                                                                                                                                                                             |
# >> |      note_tag_list |                                                                                                                                                                                                                                                                                                                                             |
# >> |     other_tag_list |                                                                                                                                                                                                                                                                                                                                             |
# >> | kifu_body_for_test |                                                                                                                                                                                                                                                                                                                                             |
# >> |         tactic_key |                                                                                                                                                                                                                                                                                                                                             |
# >> |--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> |-----+-----------+---------+----------+-----------+--------------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+----------------+------------------+-----------------+--------------------+---------------+----------------|
# >> | id  | battle_id | user_id | grade_id | judge_key | location_key | position | created_at                | updated_at                | grade_diff | think_max | op_user_id | think_last | think_all_avg | think_end_avg | two_serial_max | defense_tag_list | attack_tag_list | technique_tag_list | note_tag_list | other_tag_list |
# >> |-----+-----------+---------+----------+-----------+--------------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+----------------+------------------+-----------------+--------------------+---------------+----------------|
# >> | 157 |        79 |     115 |       40 | win       | black        |        0 | 2020-03-29 22:45:08 +0900 | 2020-03-29 22:45:08 +0900 |          0 |         5 |        116 |          2 |             2 |             2 |              1 |                  | 嬉野流          |                    | 居飛車 居玉   |                |
# >> | 158 |        79 |     116 |       40 | lose      | white        |        1 | 2020-03-29 22:45:08 +0900 | 2020-03-29 22:45:08 +0900 |          0 |         7 |        115 |          7 |             5 |             5 |                |                  | △３ニ飛戦法    |                    | 振り飛車 居玉 |                |
# >> |-----+-----------+---------+----------+-----------+--------------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+----------------+------------------+-----------------+--------------------+---------------+----------------|
