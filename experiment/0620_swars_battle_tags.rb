#!/usr/bin/env ruby
require File.expand_path('../../config/environment', __FILE__)

# battle = Swars::Battle.first
# battle.csa_seq                  # => [["+7776FU", 599], ["-7162GI", 600], ["+6766FU", 594], ["-1314FU", 597], ["+1716FU", 589], ["-3334FU", 595], ["+7968GI", 585], ["-9394FU", 589], ["+6877GI", 583], ["-9495FU", 584], ["+4958KI", 583], ["-4132KI", 578], ["+2726FU", 582], ["-5141OU", 576], ["+2625FU", 581], ["-6152KI", 572], ["+6978KI", 579], ["-5354FU", 571], ["+5756FU", 574], ["-6253GI", 570], ["+8879KA", 571], ["-4344FU", 565], ["+5867KI", 568], ["-5243KI", 564], ["+7968KA", 567], ["-2233KA", 557], ["+5969OU", 565], ["-3122GI", 553], ["+6979OU", 564], ["-4131OU", 552], ["+3938GI", 562], ["-8384FU", 551], ["+3827GI", 560], ["-8485FU", 545], ["+2726GI", 559], ["-3351KA", 540], ["+7988OU", 553], ["-7374FU", 539], ["+6846KA", 541], ["-5364GI", 533], ["+3736FU", 539], ["-2233GI", 513], ["+1615FU", 529], ["-1415FU", 511], ["+1915KY", 525], ["-0013FU", 503], ["+2818HI", 519], ["-3322GI", 485], ["+6665FU", 515], ["-6473GI", 482], ["+1828HI", 509], ["-4445FU", 470], ["+4668KA", 507], ["-2233GI", 454], ["+3635FU", 501], ["-3435FU", 452], ["+6835KA", 492], ["-7362GI", 440], ["+3568KA", 462], ["-6253GI", 437], ["+2635GI", 456], ["-5173KA", 425], ["+0037FU", 451], ["-0036FU", 420], ["+2524FU", 448], ["-3637TO", 404], ["+2423TO", 437], ["-3728TO", 401], ["+2332TO", 433], ["-3132OU", 395], ["+0034FU", 431], ["-3342GI", 384], ["+2917KE", 405], ["-7337UM", 357], ["+1725KE", 393], ["-3715UM", 342], ["+3433TO", 389], ["-2133KE", 339], ["+2533NK", 386], ["-4233GI", 338], ["+0034FU", 338], ["-3334GI", 323], ["+3534GI", 336], ["-4334KI", 321], ["+0035KI", 315], ["-3435KI", 303], ["+6835KA", 312], ["-0044GI", 297], ["+0024GI", 306], ["-1559UM", 260], ["+0033KI", 273], ["-3241OU", 236], ["+3343KI", 238], ["-0042KI", 196], ["+4344KI", 230], ["-5344GI", 191], ["+3544KA", 228], ["-0086KE", 152], ["+8786FU", 223], ["-8586FU", 149], ["+7786GI", 207], ["-0087FU", 138], ["+7887KI", 203], ["-0038HI", 124], ["+0078KE", 190], ["-5986UM", 118], ["+8786KI", 185], ["-8286HI", 115], ["+0087GI", 182], ["-0069GI", 111], ["+0068KE", 143], ["-6978NG", 103], ["+8878OU", 141], ["-8687RY", 81], ["+7887OU", 138], ["-0086FU", 77], ["+8786OU", 126], ["-0085FU", 73], ["+8685OU", 107], ["-0084FU", 62], ["+8586OU", 84], ["-0085KY", 59], ["+8677OU", 80], ["-0086GI", 46], ["+7766OU", 76], ["-0075KI", 36], ["+7675FU", 56], ["-8675GI", 31], ["+6677OU", 47], ["-0087KI", 18]]
# kif = battle.send(:kifu_body_from_csa_seq)

# info = Bioshogi::Parser.parse(kif)
# puts info.to_kif

# battle = Swars::Battle.find(64)
# battle.csa_seq                  # => [["+7776FU", 3598], ["-3334FU", 3598], ["+2726FU", 3594], ["-4344FU", 3592], ["+3948GI", 3592], ["-9394FU", 3589], ["+9796FU", 3590], ["-8232HI", 3580], ["+4746FU", 3587], ["-5162OU", 3574], ["+4847GI", 3586], ["-7172GI", 3566], ["+4756GI", 3582], ["-6271OU", 3562], ["+5968OU", 3581], ["-4152KI", 3556], ["+6878OU", 3579], ["-3142GI", 3550], ["+2848HI", 3569], ["-7182OU", 3541], ["+8877KA", 3565], ["-5354FU", 3533], ["+7888OU", 3563], ["-4253GI", 3527], ["+9998KY", 3552], ["-3435FU", 3519], ["+4838HI", 3542], ["-5364GI", 3511], ["+6766FU", 3532], ["-5455FU", 3502], ["+5667GI", 3523], ["-3242HI", 3495], ["+3848HI", 3520], ["-4232HI", 3488], ["+4838HI", 3519], ["-1314FU", 3482], ["+4958KI", 3516], ["-2213KA", 3476], ["+5847KI", 3515], ["-3242HI", 3467], ["+6665FU", 3510], ["-6465GI", 3459], ["+7755KA", 3508], ["-4445FU", 3450], ["+5511UM", 3498], ["-4546FU", 3442], ["+4756KI", 3497], ["-6556GI", 3433], ["+6756GI", 3495], ["-4647TO", 3424], ["+0045KY", 3493], ["-4245HI", 3416], ["+5645GI", 3490], ["-4738TO", 3410], ["+0012HI", 3480], ["-0049HI", 3402], ["+7978GI", 3469], ["-4945RY", 3392], ["+1121UM", 3468], ["-1324KA", 3385], ["+8977KE", 3458], ["-4549RY", 3377], ["+0068FU", 3448], ["-3848TO", 3368], ["+0044KE", 3438], ["-5262KI", 3360], ["+0052GI", 3429], ["-4858TO", 3351], ["+5261NG", 3427], ["-6261KI", 3343], ["+0079KI", 3425], ["-5869TO", 3335], ["+7969KI", 3424], ["-4944RY", 3326], ["+7675FU", 3413], ["-0054FU", 3317], ["+7867GI", 3403], ["-4449RY", 3309], ["+1272RY", 3399], ["-6172KI", 3306], ["+0078GI", 3398], ["-0064KY", 3298], ["+6758GI", 3395], ["-0076KE", 3289], ["+8897OU", 3392], ["-2433KA", 3281], ["+2154UM", 3381], ["-0088GI", 3278], ["+9786OU", 3378], ["-0084HI", 3272]]
# kif = battle.send(:kifu_body_from_csa_seq)

# tp Swars::Agent.new(run_remote: true).index_get(gtype: "",  user_key: "kinakom0chi", page_index: 0)

Swars::Battle.destroy_all

Swars::User.find_by(key: "itoshinTV").battles.destroy_all

Swars::Battle.user_import(user_key: "itoshinTV", run_remote: true)
