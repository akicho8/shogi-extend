require "./setup"

Question.destroy_all
Question.setup(mate: 3, max: 1)
Question.count                     # => 1
Question.sample(mate: 3, max: 2) rescue $!           # => #<RuntimeError: 3手詰問題を2件取得したかったが1件しかありません>

Question.destroy_all
Question.setup(mate: 3, max: 10)
Question.count                     # => 10
srand(0)
Question.sample(mate: 3, max: 5).collect(&:position) # => [5, 0, 3, 7, 9]

tp Question
# >> |-----+---------------------------------------------------------------------------------------+------+----------+---------------------------+---------------------------|
# >> | id  | sfen                                                                                  | mate | position | created_at                | updated_at                |
# >> |-----+---------------------------------------------------------------------------------------+------+----------+---------------------------+---------------------------|
# >> | 320 | ln1gkg1nl/6+P2/2sppps1p/2p3p2/p8/P1P1P3P/2NP1PP2/3s1KSR1/L1+b2G1NL w R2Pbgp 42        |    3 |        0 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 321 | l3kgsnl/9/p1pS+Bp3/7pp/6PP1/9/PPPPPPn1P/1B1GG2+r1/LNS1K3L w RG3Psnp 54                |    3 |        1 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 322 | l3k2nl/4g1gb1/1+S1pspp+P1/p1p6/3n4p/2PPR1P2/P2bPP2P/5GS2/LN1K4L w R2Pgsn2p 50         |    3 |        2 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 323 | lns+R4l/1p1p5/p1pkppB1p/6p2/1R7/6P1P/P1PPnPS2/2+b1G1g2/L3K1sNL b 2GS3Pnp 51           |    3 |        3 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 324 | 1+P1gkg2l/2s3s+P1/3ppp2p/P1p2npp1/l2N1+b3/3KP1P2/N2P1PS1P/2+p1G2R1/L1+r3sNL w Pbgp 58 |    3 |        4 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 325 | lnsG5/4g4/prpp1p1pp/1p4p2/4+B3k/2P1P4/P+b1PSP1LP/4K2SL/2G2G1r1 b SP3nl3p 71           |    3 |        5 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 326 | l5+R1l/4kS3/p4pnpp/2Pppb3/6p1P/P2s5/NP2+nPPR1/2+bS2GK1/L6NL b 3GSP4p 93               |    3 |        6 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 327 | lR5nl/5k1b1/2gp3p1/2s1p1P2/p4N2p/P3PpR2/1PPP1P2P/2G1K2s1/LN6L b GSN2Pbgs2p 83         |    3 |        7 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 328 | l1+R5l/2pS5/p2pp+P1pp/2k3p2/2N4P1/PP2R1P1P/2+pPP1N2/2GSG1bs1/LN1K4L b 2GSNPbp 73      |    3 |        8 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> | 329 | lnsg4l/1r1b5/p1pp1+N1+R1/4p3p/9/P3SSk2/NpPPPPg1P/2GK5/L1S4NL b 2Pbg4p 91              |    3 |        9 | 2020-12-29 23:45:12 +0900 | 2020-12-29 23:45:12 +0900 |
# >> |-----+---------------------------------------------------------------------------------------+------+----------+---------------------------+---------------------------|
