#!/usr/bin/env ruby
require File.expand_path('../../config/environment', __FILE__)

Swars::Battle.user_import(user_key: "devuser1")
Swars::Battle.count             # => 10

Swars::User.find_each do |e|
  e.search_logs.create!
end

puts Swars::Crawler::RegularCrawler.new.run.rows.to_t
puts Swars::Crawler::ExpertCrawler.new.run.rows.to_t
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
# >> | 日時                | ID | ユーザー名   | 前 | 後 | 差分 | 検索回数 | 最終検索 | 最終対局                   | エラー |
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
# >> | 2019-04-19 16:18:31 |  1 | devuser1 2級 |  1 |  1 |    0 |       15 | 16:18    | 2019-01-11 23:09 (3ヶ月前) |        |
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
# >> | 日時                | ID | ユーザー名   | 前 | 後 | 差分 | 検索回数 | 最終検索 | 最終対局                   | エラー |
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
# >> | 2019-04-19 16:18:43 |  1 | devuser1 2級 |  1 |  1 |    0 |       15 | 16:18    | 2019-01-11 23:09 (3ヶ月前) |        |
# >> |---------------------+----+--------------+----+----+------+----------+----------+----------------------------+--------|
