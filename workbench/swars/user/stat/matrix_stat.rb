require "./setup"

# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "268.92 ms"
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "66.72 ms"
s { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => {:my_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{:win=>49, :lose=>16}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>11, :lose=>2}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>10, :lose=>2}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>7, :lose=>0}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>6, :lose=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}], :vs_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>54}, :appear_ratio=>0.27, :judge_counts=>{:win=>37, :lose=>15}}, {:tag=>{"name"=>"四間飛車", "count"=>21}, :appear_ratio=>0.105, :judge_counts=>{:win=>18, :lose=>3}}, {:tag=>{"name"=>"三間飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:win=>13, :lose=>4}}, {:tag=>{"name"=>"向かい飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:win=>14, :lose=>4}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:win=>12, :lose=>5}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:win=>13, :lose=>2}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3}}, {:tag=>{"name"=>"右四間飛車", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>5, :lose=>5}}, {:tag=>{"name"=>"腰掛け銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3}}, {:tag=>{"name"=>"新嬉野流", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>5, :lose=>1}}, {:tag=>{"name"=>"棒銀", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>4, :lose=>2}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1}}, {:tag=>{"name"=>"角換わり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1}}, {:tag=>{"name"=>"原始棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3}}, {:tag=>{"name"=>"UFO銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0}}, {:tag=>{"name"=>"レグスペ", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0}}, {:tag=>{"name"=>"手損角交換型", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"嬉野流", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"一手損角換わり", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"鎖鎌銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"▲３七銀戦法", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"新村田システム", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"ダイレクト向かい飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"初手７八銀戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"羽生式袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"玉頭銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"四手角", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}], :my_defense_items=>[{:tag=>{"name"=>"舟囲い", "count"=>46}, :appear_ratio=>0.23, :judge_counts=>{:win=>36, :lose=>9}}, {:tag=>{"name"=>"居玉", "count"=>28}, :appear_ratio=>0.14, :judge_counts=>{:win=>23, :lose=>5}}, {:tag=>{"name"=>"新型雁木", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:win=>11, :lose=>4}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:win=>7, :lose=>7}}, {:tag=>{"name"=>"右玉", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:win=>6, :lose=>6}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3}}, {:tag=>{"name"=>"金盾囲い", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>3, :lose=>2}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>5, :lose=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2}}, {:tag=>{"name"=>"箱入り娘", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"ボナンザ囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"居飛車穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"エルモ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"カタ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"松尾流穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}], :vs_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>31}, :appear_ratio=>0.155, :judge_counts=>{:win=>27, :lose=>4}}, {:tag=>{"name"=>"高美濃囲い", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:win=>13, :lose=>2}}, {:tag=>{"name"=>"美濃囲い", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:win=>12, :lose=>2}}, {:tag=>{"name"=>"片美濃囲い", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:win=>8, :lose=>4}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>9, :lose=>1}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>5, :lose=>1}}, {:tag=>{"name"=>"カブト囲い", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2}}, {:tag=>{"name"=>"中住まい", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>4, :lose=>0}}, {:tag=>{"name"=>"右矢倉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>2, :lose=>2}}, {:tag=>{"name"=>"右玉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>4, :lose=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2}}, {:tag=>{"name"=>"金矢倉", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0}}, {:tag=>{"name"=>"木村美濃", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2}}, {:tag=>{"name"=>"早囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1}}, {:tag=>{"name"=>"新型雁木", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"銀矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>0, :lose=>2}}, {:tag=>{"name"=>"菊水矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1}}, {:tag=>{"name"=>"ちょんまげ美濃", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0}}, {:tag=>{"name"=>"角換わり右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"天野矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"銀立ち矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0}}, {:tag=>{"name"=>"坊主美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"振り飛車端玉銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"銀美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}, {:tag=>{"name"=>"いちご囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1}}]}

# A = {:my_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{:lose=>16, :win=>49, :draw=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>11, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>10, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>3, :win=>7, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>7, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>6, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:lose=>1, :win=>4, :draw=>0}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>1, :win=>3, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>54}, :appear_ratio=>0.27, :judge_counts=>{:win=>37, :lose=>15, :draw=>2}}, {:tag=>{"name"=>"四間飛車", "count"=>21}, :appear_ratio=>0.105, :judge_counts=>{:lose=>3, :win=>18, :draw=>0}}, {:tag=>{"name"=>"三間飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>13, :draw=>1}}, {:tag=>{"name"=>"向かい飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>14, :draw=>0}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>5, :win=>12, :draw=>1}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>5, :win=>5, :draw=>0}}, {:tag=>{"name"=>"腰掛け銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"新嬉野流", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>5, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>2, :win=>4, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"UFO銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>1, :win=>3, :draw=>0}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"レグスペ", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"手損角交換型", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"嬉野流", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"一手損角換わり", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"鎖鎌銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"▲３七銀戦法", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"新村田システム", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ダイレクト向かい飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"初手７八銀戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"羽生式袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"玉頭銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"四手角", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}], :my_defense_items=>[{:tag=>{"name"=>"舟囲い", "count"=>46}, :appear_ratio=>0.23, :judge_counts=>{:win=>36, :lose=>9, :draw=>1}}, {:tag=>{"name"=>"居玉", "count"=>28}, :appear_ratio=>0.14, :judge_counts=>{:lose=>5, :win=>23, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>4, :win=>11, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:win=>7, :lose=>7, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:lose=>6, :win=>6, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"金盾囲い", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>3, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>5, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"箱入り娘", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ボナンザ囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"居飛車穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"エルモ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カタ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"松尾流穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>31}, :appear_ratio=>0.155, :judge_counts=>{:lose=>4, :win=>27, :draw=>0}}, {:tag=>{"name"=>"高美濃囲い", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"美濃囲い", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:lose=>2, :win=>12, :draw=>0}}, {:tag=>{"name"=>"片美濃囲い", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:lose=>4, :win=>8, :draw=>0}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>1, :win=>9, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>1, :win=>5, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"中住まい", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"右矢倉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>2, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"金矢倉", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"木村美濃", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>2, :win=>1, :draw=>0}}, {:tag=>{"name"=>"早囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>0, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"菊水矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ちょんまげ美濃", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"角換わり右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"天野矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀立ち矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"坊主美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車端玉銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"いちご囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}]}
# B = {:my_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{:win=>49, :lose=>16, :draw=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>11, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>10, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>7, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>6, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>54}, :appear_ratio=>0.27, :judge_counts=>{:win=>37, :lose=>15, :draw=>2}}, {:tag=>{"name"=>"四間飛車", "count"=>21}, :appear_ratio=>0.105, :judge_counts=>{:lose=>3, :win=>18, :draw=>0}}, {:tag=>{"name"=>"三間飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>13, :draw=>1}}, {:tag=>{"name"=>"向かい飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>14, :draw=>0}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>5, :win=>12, :draw=>1}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>5, :win=>5, :draw=>0}}, {:tag=>{"name"=>"腰掛け銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"新嬉野流", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>5, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>2, :win=>4, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"UFO銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>1, :win=>3, :draw=>0}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"レグスペ", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"手損角交換型", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"嬉野流", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"一手損角換わり", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"鎖鎌銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"▲３七銀戦法", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"新村田システム", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ダイレクト向かい飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"初手７八銀戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"羽生式袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"玉頭銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"四手角", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}], :my_defense_items=>[{:tag=>{"name"=>"舟囲い", "count"=>46}, :appear_ratio=>0.23, :judge_counts=>{:win=>36, :lose=>9, :draw=>1}}, {:tag=>{"name"=>"居玉", "count"=>28}, :appear_ratio=>0.14, :judge_counts=>{:win=>23, :lose=>5, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:win=>11, :lose=>4, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:win=>7, :lose=>7, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:win=>6, :lose=>6, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"金盾囲い", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>3, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>5, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"箱入り娘", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"ボナンザ囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"居飛車穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"エルモ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カタ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"松尾流穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>31}, :appear_ratio=>0.155, :judge_counts=>{:lose=>4, :win=>27, :draw=>0}}, {:tag=>{"name"=>"高美濃囲い", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"美濃囲い", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:lose=>2, :win=>12, :draw=>0}}, {:tag=>{"name"=>"片美濃囲い", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:lose=>4, :win=>8, :draw=>0}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>1, :win=>9, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>1, :win=>5, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"中住まい", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"右矢倉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>2, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"金矢倉", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"木村美濃", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>2, :win=>1, :draw=>0}}, {:tag=>{"name"=>"早囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>0, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"菊水矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ちょんまげ美濃", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"角換わり右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"天野矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀立ち矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"坊主美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車端玉銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"いちご囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}]}

# Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart # => {:my_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{:lose=>16, :win=>49, :draw=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>11, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{:win=>10, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>3, :win=>7, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>7, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>6, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:lose=>1, :win=>4, :draw=>0}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>1, :win=>3, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>2, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>54}, :appear_ratio=>0.27, :judge_counts=>{:win=>37, :lose=>15, :draw=>2}}, {:tag=>{"name"=>"四間飛車", "count"=>21}, :appear_ratio=>0.105, :judge_counts=>{:lose=>3, :win=>18, :draw=>0}}, {:tag=>{"name"=>"三間飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>13, :draw=>1}}, {:tag=>{"name"=>"向かい飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>4, :win=>14, :draw=>0}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>18}, :appear_ratio=>0.09, :judge_counts=>{:lose=>5, :win=>12, :draw=>1}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:win=>7, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"右四間飛車", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>5, :win=>5, :draw=>0}}, {:tag=>{"name"=>"腰掛け銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"新嬉野流", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>5, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"棒銀", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>2, :win=>4, :draw=>0}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>4, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"角換わり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>3, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"原始棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"UFO銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>1, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>1, :win=>3, :draw=>0}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"レグスペ", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"手損角交換型", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"横歩取り", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"嬉野流", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"一手損角換わり", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"鎖鎌銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"▲３七銀戦法", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"新村田システム", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ダイレクト向かい飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"初手７八銀戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"羽生式袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"玉頭銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"四手角", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}], :my_defense_items=>[{:tag=>{"name"=>"舟囲い", "count"=>46}, :appear_ratio=>0.23, :judge_counts=>{:win=>36, :lose=>9, :draw=>1}}, {:tag=>{"name"=>"居玉", "count"=>28}, :appear_ratio=>0.14, :judge_counts=>{:lose=>5, :win=>23, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>4, :win=>11, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:win=>7, :lose=>7, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:lose=>6, :win=>6, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{:win=>4, :lose=>3, :draw=>0}}, {:tag=>{"name"=>"金盾囲い", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:win=>3, :lose=>2, :draw=>1}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>5, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"箱入り娘", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>3, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ボナンザ囲い", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"居飛車穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"エルモ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"カタ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>1, :win=>0, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}, {:tag=>{"name"=>"松尾流穴熊", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>1, :lose=>0, :draw=>0}}], :vs_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>31}, :appear_ratio=>0.155, :judge_counts=>{:lose=>4, :win=>27, :draw=>0}}, {:tag=>{"name"=>"高美濃囲い", "count"=>15}, :appear_ratio=>0.075, :judge_counts=>{:lose=>2, :win=>13, :draw=>0}}, {:tag=>{"name"=>"美濃囲い", "count"=>14}, :appear_ratio=>0.07, :judge_counts=>{:lose=>2, :win=>12, :draw=>0}}, {:tag=>{"name"=>"片美濃囲い", "count"=>12}, :appear_ratio=>0.06, :judge_counts=>{:lose=>4, :win=>8, :draw=>0}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{:lose=>1, :win=>9, :draw=>0}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{:lose=>1, :win=>5, :draw=>0}}, {:tag=>{"name"=>"カブト囲い", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{:win=>3, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"中住まい", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"右矢倉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:win=>2, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"右玉", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{:lose=>0, :win=>4, :draw=>0}}, {:tag=>{"name"=>"オールド雁木", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>1, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"金矢倉", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>0, :win=>3, :draw=>0}}, {:tag=>{"name"=>"木村美濃", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:lose=>2, :win=>1, :draw=>0}}, {:tag=>{"name"=>"早囲い", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{:win=>2, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"新型雁木", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>1, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:win=>0, :lose=>2, :draw=>0}}, {:tag=>{"name"=>"菊水矢倉", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>1, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ちょんまげ美濃", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{:lose=>0, :win=>2, :draw=>0}}, {:tag=>{"name"=>"角換わり右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"天野矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"ツノ銀型右玉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀立ち矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:lose=>0, :win=>1, :draw=>0}}, {:tag=>{"name"=>"坊主美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"振り飛車端玉銀冠", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"銀美濃", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}, {:tag=>{"name"=>"いちご囲い", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{:win=>0, :lose=>1, :draw=>0}}]}

# # ActsAsTaggableOn.force_binary_collation = true
# ActsAsTaggableOn.strict_case_match = true
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "642.23 ms"
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "586.98 ms"
# ActsAsTaggableOn.strict_case_match = false
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "923.52 ms"
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.to_all_chart } # => "911.21 ms"

# sql
# s = Swars::User["SugarHuuko"].stat(sample_max: 5).ids_scope
# s.ids
# s.ids
# s.ids
# s.ids

# a = [{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{"lose"=>16, "win"=>49, "draw"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>11, "lose"=>2}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>10, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{"lose"=>3, "win"=>7}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{"win"=>7}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{"win"=>6}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}]
# b = Swars::User["SugarHuuko"].stat(sample_max: 200).matrix_stat.my_attack_items  # => [{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{"lose"=>16, "win"=>49, "draw"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>11, "lose"=>2}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>10, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{"lose"=>3, "win"=>7}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{"win"=>7}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{"win"=>6}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}]
# a = [{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{"lose"=>16, "win"=>49, "draw"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>11, "lose"=>2}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>10, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{"lose"=>3, "win"=>7}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{"win"=>7}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{"win"=>6}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}]
# b = [{:tag=>{"name"=>"力戦", "count"=>67}, :appear_ratio=>0.335, :judge_counts=>{"lose"=>16, "win"=>49, "draw"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>11, "lose"=>2}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>13}, :appear_ratio=>0.065, :judge_counts=>{"win"=>10, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"角交換型", "count"=>10}, :appear_ratio=>0.05, :judge_counts=>{"lose"=>3, "win"=>7}}, {:tag=>{"name"=>"原始棒銀", "count"=>7}, :appear_ratio=>0.035, :judge_counts=>{"win"=>7}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>6}, :appear_ratio=>0.03, :judge_counts=>{"win"=>6}}, {:tag=>{"name"=>"相掛かり", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"銀雲雀", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>5}, :appear_ratio=>0.025, :judge_counts=>{"win"=>4, "lose"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"角換わり", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"棒銀", "count"=>4}, :appear_ratio=>0.02, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>3}, :appear_ratio=>0.015, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.01, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"阿久津流急戦矢倉", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"33金型早繰り銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"６筋位取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"屋敷流二枚銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"袖飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.005, :judge_counts=>{"win"=>1}}]
# a == b                          # => true

# ActsAsTaggableOn.force_binary_collation = false
# user = User.admin
# user.permit_tag_list.add("☗")
# user.permit_tag_list            # => ["staff", "☗"]
# user.save!
# user.reload
# user.permit_tag_list            # => ["staff", "☗"]

# user = Swars::User["SugarHuuko"]
# tp user.stat.matrix_stat.my_attack_items # => [{:tag=>{"name"=>"力戦", "count"=>17}, :appear_ratio=>0.34, :judge_counts=>{"win"=>13, "lose"=>3, "draw"=>1}}, {:tag=>{"name"=>"原始棒銀", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"win"=>5}}, {:tag=>{"name"=>"UFO銀", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"win"=>5}}, {:tag=>{"name"=>"角交換型", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"銀雲雀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相掛かり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"角換わり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"draw"=>1}}]
# tp user.stat.matrix_stat.vs_attack_items # => [{:tag=>{"name"=>"力戦", "count"=>12}, :appear_ratio=>0.24, :judge_counts=>{"win"=>9, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>nil, "draw"=>1, "win"=>4}}, {:tag=>{"name"=>"四間飛車", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"三間飛車", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>nil, "draw"=>1, "win"=>3}}, {:tag=>{"name"=>"新嬉野流", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>nil, "win"=>4}}, {:tag=>{"name"=>"棒銀", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"向かい飛車", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"角交換型", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"原始棒銀", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>nil, "lose"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>nil, "lose"=>2}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>1, "lose"=>1}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"相掛かり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"腰掛け銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"角換わり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"手損角交換型", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}]
# tp user.stat.matrix_stat.my_defense_items # => [{:tag=>{"name"=>"居玉", "count"=>11}, :appear_ratio=>0.22, :judge_counts=>{"lose"=>2, "win"=>9}}, {:tag=>{"name"=>"舟囲い", "count"=>9}, :appear_ratio=>0.18, :judge_counts=>{"win"=>6, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"新型雁木", "count"=>6}, :appear_ratio=>0.12, :judge_counts=>{"win"=>5, "lose"=>1}}, {:tag=>{"name"=>"右玉", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>1, "win"=>2}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"カブト囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"箱入り娘", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"金盾囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"draw"=>1}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}]
# tp user.stat.matrix_stat.vs_defense_items # => [{:tag=>{"name"=>"居玉", "count"=>8}, :appear_ratio=>0.16, :judge_counts=>{"win"=>7, "lose"=>1}}, {:tag=>{"name"=>"高美濃囲い", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>nil, "win"=>5}}, {:tag=>{"name"=>"中住まい", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"右玉", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"片美濃囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"木村美濃", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"右矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"新型雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"カブト囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"早囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"金矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"美濃囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}]
# tp user.stat.matrix_stat.to_all_chart     # => {:my_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>17}, :appear_ratio=>0.34, :judge_counts=>{"win"=>13, "lose"=>3, "draw"=>1}}, {:tag=>{"name"=>"原始棒銀", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"win"=>5}}, {:tag=>{"name"=>"UFO銀", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"win"=>5}}, {:tag=>{"name"=>"角交換型", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"銀雲雀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相掛かり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"△３三角型空中戦法", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"角換わり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"draw"=>1}}], :vs_attack_items=>[{:tag=>{"name"=>"力戦", "count"=>12}, :appear_ratio=>0.24, :judge_counts=>{"win"=>9, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"5筋位取り中飛車", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>1, "win"=>4}}, {:tag=>{"name"=>"角交換振り飛車", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>nil, "draw"=>1, "win"=>4}}, {:tag=>{"name"=>"四間飛車", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>1, "win"=>3}}, {:tag=>{"name"=>"三間飛車", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>nil, "draw"=>1, "win"=>3}}, {:tag=>{"name"=>"新嬉野流", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"lose"=>nil, "win"=>4}}, {:tag=>{"name"=>"棒銀", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"向かい飛車", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"角交換型", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>nil, "win"=>3}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"原始棒銀", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>nil, "lose"=>2}}, {:tag=>{"name"=>"UFO銀", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>nil, "lose"=>2}}, {:tag=>{"name"=>"右四間飛車", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>1, "lose"=>1}}, {:tag=>{"name"=>"ゴキゲン中飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"四間飛車ミレニアム", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"相掛かり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"腰掛け銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"角換わり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"手損角交換型", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"鬼殺し向かい飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}], :my_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>11}, :appear_ratio=>0.22, :judge_counts=>{"lose"=>2, "win"=>9}}, {:tag=>{"name"=>"舟囲い", "count"=>9}, :appear_ratio=>0.18, :judge_counts=>{"win"=>6, "lose"=>2, "draw"=>1}}, {:tag=>{"name"=>"新型雁木", "count"=>6}, :appear_ratio=>0.12, :judge_counts=>{"win"=>5, "lose"=>1}}, {:tag=>{"name"=>"右玉", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"lose"=>1, "win"=>2}}, {:tag=>{"name"=>"居飛車金美濃", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"カブト囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"箱入り娘", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"オールド雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"へこみ矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"串カツ囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"金盾囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"draw"=>1}}, {:tag=>{"name"=>"三段右玉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}], :vs_defense_items=>[{:tag=>{"name"=>"居玉", "count"=>8}, :appear_ratio=>0.16, :judge_counts=>{"win"=>7, "lose"=>1}}, {:tag=>{"name"=>"高美濃囲い", "count"=>5}, :appear_ratio=>0.1, :judge_counts=>{"lose"=>nil, "win"=>5}}, {:tag=>{"name"=>"中住まい", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"右玉", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>nil, "win"=>2}}, {:tag=>{"name"=>"振り飛車ミレニアム", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"片美濃囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"銀冠", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"ツノ銀雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"木村美濃", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"右矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"新型雁木", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"カブト囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"振り飛車穴熊", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"早囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>nil, "lose"=>1}}, {:tag=>{"name"=>"金矢倉", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}, {:tag=>{"name"=>"美濃囲い", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>nil, "win"=>1}}]}

# sql
# Swars::User["SugarHuuko"].stat.matrix_stat.my_attack_items # => [{:tag=>{"name"=>"力戦", "count"=>17}, :appear_ratio=>0.34, :judge_counts=>{"win"=>11, "lose"=>6}}, {:tag=>{"name"=>"へなちょこ急戦", "count"=>4}, :appear_ratio=>0.08, :judge_counts=>{"win"=>3, "lose"=>1}}, {:tag=>{"name"=>"UFO銀", "count"=>3}, :appear_ratio=>0.06, :judge_counts=>{"win"=>3}}, {:tag=>{"name"=>"▲４五歩早仕掛け", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"銀雲雀", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"角交換型", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"lose"=>1, "win"=>1}}, {:tag=>{"name"=>"手得角交換型", "count"=>2}, :appear_ratio=>0.04, :judge_counts=>{"win"=>2}}, {:tag=>{"name"=>"角換わり", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相振り飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"棒銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"右四間飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"原始棒銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"横歩取り", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"lose"=>1}}, {:tag=>{"name"=>"対振り持久戦", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"角換わり腰掛け銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"相掛かり棒銀", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}, {:tag=>{"name"=>"地下鉄飛車", "count"=>1}, :appear_ratio=>0.02, :judge_counts=>{"win"=>1}}]

# s = Swars::User["SugarHuuko"].stat.ids_scope
# ActsAsTaggableOn.strict_case_match = true
# c = s.tagged_with("穴熊", on: "attack_tags").s_group_judge_key.count # => {}
# ActsAsTaggableOn.strict_case_match = false
# c = s.tagged_with("穴熊", on: "attack_tags").s_group_judge_key.count # => {}
# Swars::User["SugarHuuko"].stat.as_json

# ActiveRecord::Base.logger = ActiveSupport::Logger.new(STDOUT); ActiveSupport::LogSubscriber.colorize_logging = false
# _ { ActsAsTaggableOn.strict_case_match = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count } # => "233.76 ms"
# _ { ActsAsTaggableOn.strict_case_match = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count } # => "1933.83 ms"

# puts Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").explain
# puts Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").explain

# ActsAsTaggableOn.strict_case_match = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count       # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.strict_case_match = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count       # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.strict_case_match = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                           # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.strict_case_match = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                           # => {"lose"=>5, "win"=>23}

# ActsAsTaggableOn.force_binary_collation = true;
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tag_counts_on("attack_tags", order: "count DESC") } # => "166.47 ms"
# ActsAsTaggableOn.force_binary_collation = false;
# _ { Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tag_counts_on("attack_tags", order: "count DESC") } # => "30.94 ms"
# _ { ActsAsTaggableOn.strict_case_match = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tag_counts_on("attack_tags", order: "count DESC") } # => "23.10 ms"
# _ { ActsAsTaggableOn.strict_case_match = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tag_counts_on("attack_tags", order: "count DESC") } # => "23.45 ms"

# ActsAsTaggableOn.force_binary_collation = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.force_binary_collation = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.force_binary_collation = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                     # => {"lose"=>5, "win"=>23}
# ActsAsTaggableOn.force_binary_collation = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                     # => {"lose"=>5, "win"=>23}
#
# _ { ActsAsTaggableOn.force_binary_collation = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count } # => "2621.10 ms"
# _ { ActsAsTaggableOn.force_binary_collation = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉", on: "defense_tags").s_group_judge_key.count } # => "2738.13 ms"
# _ { ActsAsTaggableOn.force_binary_collation = false; Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                     }  # => "437.86 ms"
# _ { ActsAsTaggableOn.force_binary_collation = true;  Swars::User["SugarHuuko"].stat(sample_max: 200).ids_scope.tagged_with("居玉").s_group_judge_key.count                     } # => "334.31 ms"

# ActsAsTaggableOn::Tag.find_each do |e|
#   if e.name != e.name.toeuc.toutf8
#     p [e.name, e.taggings_count]
#     e.destroy!
#   end
# end

# >>   Swars::User Load (0.5ms)  SELECT `swars_users`.* FROM `swars_users` WHERE `swars_users`.`user_key` = 'SugarHuuko' LIMIT 1
# >>   ↳ app/models/swars/user.rb:9:in `[]'
# >>   Swars::Membership Ids (45.1ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`user_id` = 17413 ORDER BY `swars_battles`.`battled_at` DESC LIMIT 200
# >>   ↳ app/models/swars/user/stat/scope_ext.rb:52:in `scope_ids'
# >>   Swars::Membership Pluck (1.4ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322337, 99322339, 99322341, 99322343, 99049425, 99030316, 99030318, 99030319, 99030328, 99030332, 99030336, 98973484, 98973487, 98973489, 98973491, 98973493, 98973495, 98972125, 98972127, 98972130, 98972132, 98972134, 98972136, 98971214, 98969678, 98969683, 98969687, 98969691, 98969695, 98969697, 98969700, 98969704, 98969709, 98972152, 98966476, 98973059, 98964728, 98964730, 98964731, 98964733, 98964736, 98963461, 98963319, 98963324, 98962470, 98963326, 98963330, 98963333, 98962119, 98963337, 98963339, 98819268, 98819100, 98819102, 98819105, 98819106, 98819109, 98819111, 98819113, 98819115, 98819116, 98691405, 98691408, 98683947, 98691410, 98683496, 98691411, 98683277, 98691413, 98691416, 98683503, 98683509, 98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490, 97904492, 97904493, 97904496, 97904498, 97904499, 97904504, 98196905, 98196906, 97897023, 97897026, 97897027, 97897029, 97897032, 97897034, 97897035, 97870879, 97870918, 97870922, 97870924, 97870928, 97866648, 97870932, 97870937, 97870941, 97870880, 97870884, 97870890, 97870896, 97863145, 97870898, 97870902, 97870905, 97870910, 97870912, 97919519, 97854168, 97853126, 97849807, 97849810, 97784026, 97784029, 97784031, 97784033, 97757282, 97757284, 97757286, 97757287, 97757289, 97757291, 97757294, 97754781, 97754783, 97628380, 97628383, 97628384, 97628386, 97621410, 97620059, 97628388, 97628390, 97628392, 97619056, 97618011, 97619058, 97619060, 97614627, 97614630, 97614632, 97614633, 97614635, 97614637, 97614640, 97614642, 97611674, 97614643, 98135770, 97543437, 97543439)
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:45:in `build_by'
# >>   ActsAsTaggableOn::Tag Load (2.0ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'attack_tags') AND (taggings.taggable_id IN ('97543437','97543439','97611674','97614627','97614630','97614632','97614633','97614635','97614637','97614640','97614642','97614643','97618011','97619056','97619058','97619060','97620059','97621410','97628380','97628383','97628384','97628386','97628388','97628390','97628392','97754781','97754783','97757282','97757284','97757286','97757287','97757289','97757291','97757294','97784026','97784029','97784031','97784033','97849807','97849810','97853126','97854168','97863145','97866648','97870879','97870880','97870884','97870890','97870896','97870898','97870902','97870905','97870910','97870912','97870918','97870922','97870924','97870928','97870932','97870937','97870941','97897023','97897026','97897027','97897029','97897032','97897034','97897035','97904485','97904487','97904490','97904492','97904493','97904496','97904498','97904499','97904504','97904863','97909143','97909144','97919519','98135770','98191817','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196905','98196906','98196909','98196911','98196913','98196915','98208928','98212763','98212766','98212768','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204','98683277','98683496','98683503','98683509','98683947','98691405','98691408','98691410','98691411','98691413','98691416','98819100','98819102','98819105','98819106','98819109','98819111','98819113','98819115','98819116','98819268','98962119','98962470','98963319','98963324','98963326','98963330','98963333','98963337','98963339','98963461','98964728','98964730','98964731','98964733','98964736','98966476','98969678','98969683','98969687','98969691','98969695','98969697','98969700','98969704','98969709','98971214','98972125','98972127','98972130','98972132','98972134','98972136','98972152','98973059','98973484','98973487','98973489','98973491','98973493','98973495','99030316','99030318','99030319','99030328','99030332','99030336','99049425','99322337','99322339','99322341','99322343')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id ORDER BY count DESC
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:46:in `collect'
# >>   Swars::Membership Count (0.9ms)  SELECT COUNT(*) FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322337, 99322339, 99322341, 99322343, 99049425, 99030316, 99030318, 99030319, 99030328, 99030332, 99030336, 98973484, 98973487, 98973489, 98973491, 98973493, 98973495, 98972125, 98972127, 98972130, 98972132, 98972134, 98972136, 98971214, 98969678, 98969683, 98969687, 98969691, 98969695, 98969697, 98969700, 98969704, 98969709, 98972152, 98966476, 98973059, 98964728, 98964730, 98964731, 98964733, 98964736, 98963461, 98963319, 98963324, 98962470, 98963326, 98963330, 98963333, 98962119, 98963337, 98963339, 98819268, 98819100, 98819102, 98819105, 98819106, 98819109, 98819111, 98819113, 98819115, 98819116, 98691405, 98691408, 98683947, 98691410, 98683496, 98691411, 98683277, 98691413, 98691416, 98683503, 98683509, 98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490, 97904492, 97904493, 97904496, 97904498, 97904499, 97904504, 98196905, 98196906, 97897023, 97897026, 97897027, 97897029, 97897032, 97897034, 97897035, 97870879, 97870918, 97870922, 97870924, 97870928, 97866648, 97870932, 97870937, 97870941, 97870880, 97870884, 97870890, 97870896, 97863145, 97870898, 97870902, 97870905, 97870910, 97870912, 97919519, 97854168, 97853126, 97849807, 97849810, 97784026, 97784029, 97784031, 97784033, 97757282, 97757284, 97757286, 97757287, 97757289, 97757291, 97757294, 97754781, 97754783, 97628380, 97628383, 97628384, 97628386, 97621410, 97620059, 97628388, 97628390, 97628392, 97619056, 97618011, 97619058, 97619060, 97614627, 97614630, 97614632, 97614633, 97614635, 97614637, 97614640, 97614642, 97611674, 97614643, 98135770, 97543437, 97543439)
# >>   ↳ app/models/swars/user/stat/scope_ext.rb:62:in `ids_count'
# >>   Swars::Membership Count (3.5ms)  SELECT COUNT(*) AS `count_all`, `tags`.`name` AS `tags_name`, `judges`.`key` AS `judges_key` FROM `swars_memberships` INNER JOIN `taggings` ON `taggings`.`taggable_type` = 'Swars::Membership' AND `taggings`.`taggable_id` = `swars_memberships`.`id` INNER JOIN `tags` ON `tags`.`id` = `taggings`.`tag_id` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (99322337, 99322339, 99322341, 99322343, 99049425, 99030316, 99030318, 99030319, 99030328, 99030332, 99030336, 98973484, 98973487, 98973489, 98973491, 98973493, 98973495, 98972125, 98972127, 98972130, 98972132, 98972134, 98972136, 98971214, 98969678, 98969683, 98969687, 98969691, 98969695, 98969697, 98969700, 98969704, 98969709, 98972152, 98966476, 98973059, 98964728, 98964730, 98964731, 98964733, 98964736, 98963461, 98963319, 98963324, 98962470, 98963326, 98963330, 98963333, 98962119, 98963337, 98963339, 98819268, 98819100, 98819102, 98819105, 98819106, 98819109, 98819111, 98819113, 98819115, 98819116, 98691405, 98691408, 98683947, 98691410, 98683496, 98691411, 98683277, 98691413, 98691416, 98683503, 98683509, 98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490, 97904492, 97904493, 97904496, 97904498, 97904499, 97904504, 98196905, 98196906, 97897023, 97897026, 97897027, 97897029, 97897032, 97897034, 97897035, 97870879, 97870918, 97870922, 97870924, 97870928, 97866648, 97870932, 97870937, 97870941, 97870880, 97870884, 97870890, 97870896, 97863145, 97870898, 97870902, 97870905, 97870910, 97870912, 97919519, 97854168, 97853126, 97849807, 97849810, 97784026, 97784029, 97784031, 97784033, 97757282, 97757284, 97757286, 97757287, 97757289, 97757291, 97757294, 97754781, 97754783, 97628380, 97628383, 97628384, 97628386, 97621410, 97620059, 97628388, 97628390, 97628392, 97619056, 97618011, 97619058, 97619060, 97614627, 97614630, 97614632, 97614633, 97614635, 97614637, 97614640, 97614642, 97611674, 97614643, 98135770, 97543437, 97543439) GROUP BY `tags`.`name`, `judges`.`key`
# >>   ↳ app/models/swars/user/stat/tag_stat.rb:147:in `block in inside_counts_hash'
# >>   Swars::Membership Ids (20.0ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`op_user_id` = 17413 ORDER BY `swars_battles`.`battled_at` DESC LIMIT 200
# >>   ↳ app/models/swars/user/stat/scope_ext.rb:52:in `scope_ids'
# >>   Swars::Membership Pluck (1.0ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322338, 99322340, 99322342, 99322344, 99049424, 99030315, 99030317, 99030320, 99030329, 99030333, 99030337, 98973485, 98973486, 98973488, 98973490, 98973492, 98973494, 98972126, 98972128, 98972129, 98972131, 98972133, 98972135, 98971213, 98969680, 98969682, 98969686, 98969690, 98969693, 98969699, 98969702, 98969705, 98969708, 98972151, 98966475, 98973060, 98964727, 98964729, 98964732, 98964734, 98964735, 98963462, 98963321, 98963323, 98962471, 98963325, 98963328, 98963334, 98962120, 98963338, 98963340, 98819269, 98819101, 98819103, 98819104, 98819107, 98819108, 98819110, 98819112, 98819114, 98819117, 98691406, 98691407, 98683948, 98691409, 98683495, 98691412, 98683278, 98691414, 98691415, 98683504, 98683510, 98271895, 98271897, 98271898, 98271901, 98271903, 98271904, 98271906, 98271908, 98271910, 98271912, 98303205, 98212764, 98212765, 98212767, 98212770, 98212772, 98212773, 98208929, 98212776, 98212777, 98263993, 98263996, 98263997, 98263999, 98264002, 98264004, 98264006, 98264008, 98196868, 98196870, 98196873, 98196875, 98196877, 98196879, 98196880, 98196884, 98196898, 98196900, 98196902, 98196908, 98196910, 98196912, 98196914, 98191815, 97909142, 97909145, 97904864, 97904486, 97904488, 97904489, 97904491, 97904494, 97904495, 97904497, 97904500, 97904502, 98196904, 98196907, 97897024, 97897025, 97897028, 97897030, 97897031, 97897033, 97897036, 97870877, 97870919, 97870923, 97870925, 97870929, 97866649, 97870933, 97870936, 97870939, 97870881, 97870885, 97870888, 97870894, 97863146, 97870899, 97870903, 97870906, 97870908, 97870913, 97919520, 97854169, 97853127, 97849808, 97849809, 97784027, 97784028, 97784030, 97784032, 97757281, 97757283, 97757285, 97757288, 97757290, 97757292, 97757293, 97754782, 97754784, 97628381, 97628382, 97628385, 97628387, 97621409, 97620058, 97628389, 97628391, 97628393, 97619057, 97618012, 97619059, 97619061, 97614628, 97614629, 97614631, 97614634, 97614636, 97614638, 97614639, 97614641, 97611675, 97614644, 98135771, 97543438, 97543440)
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:45:in `build_by'
# >>   ActsAsTaggableOn::Tag Load (2.1ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'attack_tags') AND (taggings.taggable_id IN ('97543438','97543440','97611675','97614628','97614629','97614631','97614634','97614636','97614638','97614639','97614641','97614644','97618012','97619057','97619059','97619061','97620058','97621409','97628381','97628382','97628385','97628387','97628389','97628391','97628393','97754782','97754784','97757281','97757283','97757285','97757288','97757290','97757292','97757293','97784027','97784028','97784030','97784032','97849808','97849809','97853127','97854169','97863146','97866649','97870877','97870881','97870885','97870888','97870894','97870899','97870903','97870906','97870908','97870913','97870919','97870923','97870925','97870929','97870933','97870936','97870939','97897024','97897025','97897028','97897030','97897031','97897033','97897036','97904486','97904488','97904489','97904491','97904494','97904495','97904497','97904500','97904502','97904864','97909142','97909145','97919520','98135771','98191815','98196868','98196870','98196873','98196875','98196877','98196879','98196880','98196884','98196898','98196900','98196902','98196904','98196907','98196908','98196910','98196912','98196914','98208929','98212764','98212765','98212767','98212770','98212772','98212773','98212776','98212777','98263993','98263996','98263997','98263999','98264002','98264004','98264006','98264008','98271895','98271897','98271898','98271901','98271903','98271904','98271906','98271908','98271910','98271912','98303205','98683278','98683495','98683504','98683510','98683948','98691406','98691407','98691409','98691412','98691414','98691415','98819101','98819103','98819104','98819107','98819108','98819110','98819112','98819114','98819117','98819269','98962120','98962471','98963321','98963323','98963325','98963328','98963334','98963338','98963340','98963462','98964727','98964729','98964732','98964734','98964735','98966475','98969680','98969682','98969686','98969690','98969693','98969699','98969702','98969705','98969708','98971213','98972126','98972128','98972129','98972131','98972133','98972135','98972151','98973060','98973485','98973486','98973488','98973490','98973492','98973494','99030315','99030317','99030320','99030329','99030333','99030337','99049424','99322338','99322340','99322342','99322344')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id ORDER BY count DESC
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:46:in `collect'
# >>   Swars::Membership Count (1.0ms)  SELECT COUNT(*) FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322338, 99322340, 99322342, 99322344, 99049424, 99030315, 99030317, 99030320, 99030329, 99030333, 99030337, 98973485, 98973486, 98973488, 98973490, 98973492, 98973494, 98972126, 98972128, 98972129, 98972131, 98972133, 98972135, 98971213, 98969680, 98969682, 98969686, 98969690, 98969693, 98969699, 98969702, 98969705, 98969708, 98972151, 98966475, 98973060, 98964727, 98964729, 98964732, 98964734, 98964735, 98963462, 98963321, 98963323, 98962471, 98963325, 98963328, 98963334, 98962120, 98963338, 98963340, 98819269, 98819101, 98819103, 98819104, 98819107, 98819108, 98819110, 98819112, 98819114, 98819117, 98691406, 98691407, 98683948, 98691409, 98683495, 98691412, 98683278, 98691414, 98691415, 98683504, 98683510, 98271895, 98271897, 98271898, 98271901, 98271903, 98271904, 98271906, 98271908, 98271910, 98271912, 98303205, 98212764, 98212765, 98212767, 98212770, 98212772, 98212773, 98208929, 98212776, 98212777, 98263993, 98263996, 98263997, 98263999, 98264002, 98264004, 98264006, 98264008, 98196868, 98196870, 98196873, 98196875, 98196877, 98196879, 98196880, 98196884, 98196898, 98196900, 98196902, 98196908, 98196910, 98196912, 98196914, 98191815, 97909142, 97909145, 97904864, 97904486, 97904488, 97904489, 97904491, 97904494, 97904495, 97904497, 97904500, 97904502, 98196904, 98196907, 97897024, 97897025, 97897028, 97897030, 97897031, 97897033, 97897036, 97870877, 97870919, 97870923, 97870925, 97870929, 97866649, 97870933, 97870936, 97870939, 97870881, 97870885, 97870888, 97870894, 97863146, 97870899, 97870903, 97870906, 97870908, 97870913, 97919520, 97854169, 97853127, 97849808, 97849809, 97784027, 97784028, 97784030, 97784032, 97757281, 97757283, 97757285, 97757288, 97757290, 97757292, 97757293, 97754782, 97754784, 97628381, 97628382, 97628385, 97628387, 97621409, 97620058, 97628389, 97628391, 97628393, 97619057, 97618012, 97619059, 97619061, 97614628, 97614629, 97614631, 97614634, 97614636, 97614638, 97614639, 97614641, 97611675, 97614644, 98135771, 97543438, 97543440)
# >>   ↳ app/models/swars/user/stat/scope_ext.rb:62:in `ids_count'
# >>   Swars::Membership Count (3.7ms)  SELECT COUNT(*) AS `count_all`, `tags`.`name` AS `tags_name`, `judges`.`key` AS `judges_key` FROM `swars_memberships` INNER JOIN `taggings` ON `taggings`.`taggable_type` = 'Swars::Membership' AND `taggings`.`taggable_id` = `swars_memberships`.`id` INNER JOIN `tags` ON `tags`.`id` = `taggings`.`tag_id` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (99322338, 99322340, 99322342, 99322344, 99049424, 99030315, 99030317, 99030320, 99030329, 99030333, 99030337, 98973485, 98973486, 98973488, 98973490, 98973492, 98973494, 98972126, 98972128, 98972129, 98972131, 98972133, 98972135, 98971213, 98969680, 98969682, 98969686, 98969690, 98969693, 98969699, 98969702, 98969705, 98969708, 98972151, 98966475, 98973060, 98964727, 98964729, 98964732, 98964734, 98964735, 98963462, 98963321, 98963323, 98962471, 98963325, 98963328, 98963334, 98962120, 98963338, 98963340, 98819269, 98819101, 98819103, 98819104, 98819107, 98819108, 98819110, 98819112, 98819114, 98819117, 98691406, 98691407, 98683948, 98691409, 98683495, 98691412, 98683278, 98691414, 98691415, 98683504, 98683510, 98271895, 98271897, 98271898, 98271901, 98271903, 98271904, 98271906, 98271908, 98271910, 98271912, 98303205, 98212764, 98212765, 98212767, 98212770, 98212772, 98212773, 98208929, 98212776, 98212777, 98263993, 98263996, 98263997, 98263999, 98264002, 98264004, 98264006, 98264008, 98196868, 98196870, 98196873, 98196875, 98196877, 98196879, 98196880, 98196884, 98196898, 98196900, 98196902, 98196908, 98196910, 98196912, 98196914, 98191815, 97909142, 97909145, 97904864, 97904486, 97904488, 97904489, 97904491, 97904494, 97904495, 97904497, 97904500, 97904502, 98196904, 98196907, 97897024, 97897025, 97897028, 97897030, 97897031, 97897033, 97897036, 97870877, 97870919, 97870923, 97870925, 97870929, 97866649, 97870933, 97870936, 97870939, 97870881, 97870885, 97870888, 97870894, 97863146, 97870899, 97870903, 97870906, 97870908, 97870913, 97919520, 97854169, 97853127, 97849808, 97849809, 97784027, 97784028, 97784030, 97784032, 97757281, 97757283, 97757285, 97757288, 97757290, 97757292, 97757293, 97754782, 97754784, 97628381, 97628382, 97628385, 97628387, 97621409, 97620058, 97628389, 97628391, 97628393, 97619057, 97618012, 97619059, 97619061, 97614628, 97614629, 97614631, 97614634, 97614636, 97614638, 97614639, 97614641, 97611675, 97614644, 98135771, 97543438, 97543440) GROUP BY `tags`.`name`, `judges`.`key`
# >>   ↳ app/models/swars/user/stat/tag_stat.rb:147:in `block in inside_counts_hash'
# >>   Swars::Membership Pluck (1.0ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322337, 99322339, 99322341, 99322343, 99049425, 99030316, 99030318, 99030319, 99030328, 99030332, 99030336, 98973484, 98973487, 98973489, 98973491, 98973493, 98973495, 98972125, 98972127, 98972130, 98972132, 98972134, 98972136, 98971214, 98969678, 98969683, 98969687, 98969691, 98969695, 98969697, 98969700, 98969704, 98969709, 98972152, 98966476, 98973059, 98964728, 98964730, 98964731, 98964733, 98964736, 98963461, 98963319, 98963324, 98962470, 98963326, 98963330, 98963333, 98962119, 98963337, 98963339, 98819268, 98819100, 98819102, 98819105, 98819106, 98819109, 98819111, 98819113, 98819115, 98819116, 98691405, 98691408, 98683947, 98691410, 98683496, 98691411, 98683277, 98691413, 98691416, 98683503, 98683509, 98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490, 97904492, 97904493, 97904496, 97904498, 97904499, 97904504, 98196905, 98196906, 97897023, 97897026, 97897027, 97897029, 97897032, 97897034, 97897035, 97870879, 97870918, 97870922, 97870924, 97870928, 97866648, 97870932, 97870937, 97870941, 97870880, 97870884, 97870890, 97870896, 97863145, 97870898, 97870902, 97870905, 97870910, 97870912, 97919519, 97854168, 97853126, 97849807, 97849810, 97784026, 97784029, 97784031, 97784033, 97757282, 97757284, 97757286, 97757287, 97757289, 97757291, 97757294, 97754781, 97754783, 97628380, 97628383, 97628384, 97628386, 97621410, 97620059, 97628388, 97628390, 97628392, 97619056, 97618011, 97619058, 97619060, 97614627, 97614630, 97614632, 97614633, 97614635, 97614637, 97614640, 97614642, 97611674, 97614643, 98135770, 97543437, 97543439)
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:45:in `build_by'
# >>   ActsAsTaggableOn::Tag Load (1.8ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'defense_tags') AND (taggings.taggable_id IN ('97543437','97543439','97611674','97614627','97614630','97614632','97614633','97614635','97614637','97614640','97614642','97614643','97618011','97619056','97619058','97619060','97620059','97621410','97628380','97628383','97628384','97628386','97628388','97628390','97628392','97754781','97754783','97757282','97757284','97757286','97757287','97757289','97757291','97757294','97784026','97784029','97784031','97784033','97849807','97849810','97853126','97854168','97863145','97866648','97870879','97870880','97870884','97870890','97870896','97870898','97870902','97870905','97870910','97870912','97870918','97870922','97870924','97870928','97870932','97870937','97870941','97897023','97897026','97897027','97897029','97897032','97897034','97897035','97904485','97904487','97904490','97904492','97904493','97904496','97904498','97904499','97904504','97904863','97909143','97909144','97919519','98135770','98191817','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196905','98196906','98196909','98196911','98196913','98196915','98208928','98212763','98212766','98212768','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204','98683277','98683496','98683503','98683509','98683947','98691405','98691408','98691410','98691411','98691413','98691416','98819100','98819102','98819105','98819106','98819109','98819111','98819113','98819115','98819116','98819268','98962119','98962470','98963319','98963324','98963326','98963330','98963333','98963337','98963339','98963461','98964728','98964730','98964731','98964733','98964736','98966476','98969678','98969683','98969687','98969691','98969695','98969697','98969700','98969704','98969709','98971214','98972125','98972127','98972130','98972132','98972134','98972136','98972152','98973059','98973484','98973487','98973489','98973491','98973493','98973495','99030316','99030318','99030319','99030328','99030332','99030336','99049425','99322337','99322339','99322341','99322343')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id ORDER BY count DESC
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:46:in `collect'
# >>   Swars::Membership Pluck (1.0ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (99322338, 99322340, 99322342, 99322344, 99049424, 99030315, 99030317, 99030320, 99030329, 99030333, 99030337, 98973485, 98973486, 98973488, 98973490, 98973492, 98973494, 98972126, 98972128, 98972129, 98972131, 98972133, 98972135, 98971213, 98969680, 98969682, 98969686, 98969690, 98969693, 98969699, 98969702, 98969705, 98969708, 98972151, 98966475, 98973060, 98964727, 98964729, 98964732, 98964734, 98964735, 98963462, 98963321, 98963323, 98962471, 98963325, 98963328, 98963334, 98962120, 98963338, 98963340, 98819269, 98819101, 98819103, 98819104, 98819107, 98819108, 98819110, 98819112, 98819114, 98819117, 98691406, 98691407, 98683948, 98691409, 98683495, 98691412, 98683278, 98691414, 98691415, 98683504, 98683510, 98271895, 98271897, 98271898, 98271901, 98271903, 98271904, 98271906, 98271908, 98271910, 98271912, 98303205, 98212764, 98212765, 98212767, 98212770, 98212772, 98212773, 98208929, 98212776, 98212777, 98263993, 98263996, 98263997, 98263999, 98264002, 98264004, 98264006, 98264008, 98196868, 98196870, 98196873, 98196875, 98196877, 98196879, 98196880, 98196884, 98196898, 98196900, 98196902, 98196908, 98196910, 98196912, 98196914, 98191815, 97909142, 97909145, 97904864, 97904486, 97904488, 97904489, 97904491, 97904494, 97904495, 97904497, 97904500, 97904502, 98196904, 98196907, 97897024, 97897025, 97897028, 97897030, 97897031, 97897033, 97897036, 97870877, 97870919, 97870923, 97870925, 97870929, 97866649, 97870933, 97870936, 97870939, 97870881, 97870885, 97870888, 97870894, 97863146, 97870899, 97870903, 97870906, 97870908, 97870913, 97919520, 97854169, 97853127, 97849808, 97849809, 97784027, 97784028, 97784030, 97784032, 97757281, 97757283, 97757285, 97757288, 97757290, 97757292, 97757293, 97754782, 97754784, 97628381, 97628382, 97628385, 97628387, 97621409, 97620058, 97628389, 97628391, 97628393, 97619057, 97618012, 97619059, 97619061, 97614628, 97614629, 97614631, 97614634, 97614636, 97614638, 97614639, 97614641, 97611675, 97614644, 98135771, 97543438, 97543440)
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:45:in `build_by'
# >>   ActsAsTaggableOn::Tag Load (1.7ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'defense_tags') AND (taggings.taggable_id IN ('97543438','97543440','97611675','97614628','97614629','97614631','97614634','97614636','97614638','97614639','97614641','97614644','97618012','97619057','97619059','97619061','97620058','97621409','97628381','97628382','97628385','97628387','97628389','97628391','97628393','97754782','97754784','97757281','97757283','97757285','97757288','97757290','97757292','97757293','97784027','97784028','97784030','97784032','97849808','97849809','97853127','97854169','97863146','97866649','97870877','97870881','97870885','97870888','97870894','97870899','97870903','97870906','97870908','97870913','97870919','97870923','97870925','97870929','97870933','97870936','97870939','97897024','97897025','97897028','97897030','97897031','97897033','97897036','97904486','97904488','97904489','97904491','97904494','97904495','97904497','97904500','97904502','97904864','97909142','97909145','97919520','98135771','98191815','98196868','98196870','98196873','98196875','98196877','98196879','98196880','98196884','98196898','98196900','98196902','98196904','98196907','98196908','98196910','98196912','98196914','98208929','98212764','98212765','98212767','98212770','98212772','98212773','98212776','98212777','98263993','98263996','98263997','98263999','98264002','98264004','98264006','98264008','98271895','98271897','98271898','98271901','98271903','98271904','98271906','98271908','98271910','98271912','98303205','98683278','98683495','98683504','98683510','98683948','98691406','98691407','98691409','98691412','98691414','98691415','98819101','98819103','98819104','98819107','98819108','98819110','98819112','98819114','98819117','98819269','98962120','98962471','98963321','98963323','98963325','98963328','98963334','98963338','98963340','98963462','98964727','98964729','98964732','98964734','98964735','98966475','98969680','98969682','98969686','98969690','98969693','98969699','98969702','98969705','98969708','98971213','98972126','98972128','98972129','98972131','98972133','98972135','98972151','98973060','98973485','98973486','98973488','98973490','98973492','98973494','99030315','99030317','99030320','99030329','99030333','99030337','99049424','99322338','99322340','99322342','99322344')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id ORDER BY count DESC
# >>   ↳ app/models/swars/user/stat/matrix_stat.rb:46:in `collect'
