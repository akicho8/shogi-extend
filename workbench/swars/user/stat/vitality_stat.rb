require "./setup"
_ { Swars::User["SugarHuuko"].stat(sample_max: 1000).vitality_stat.level } # => "194.05 ms"
s { Swars::User["SugarHuuko"].stat(sample_max: 1000).vitality_stat.level } # => 0.0
# >>   Swars::User Load (0.2ms)  SELECT `swars_users`.* FROM `swars_users` WHERE `swars_users`.`user_key` = 'SugarHuuko' LIMIT 1
# >>   ↳ app/models/swars/user.rb:43:in `[]'
# >>   Swars::Membership Ids (20.2ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`user_id` = 17413 ORDER BY `swars_battles`.`battled_at` DESC LIMIT 1000
# >>   ↳ app/models/swars/user/stat/scope_ext.rb:31:in `scope_ids'
# >>   Swars::Membership Count (1.3ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (100015085, 100015087, 100015089, 100015091, 100009154, 100009157, 100007479, 100007489, 100007493, 100007495, 100007498, 100003389, 100003392, 100003397, 100003411, 100003416, 99994325, 99994327, 99993733, 99993076, 99993078, 99993080, 99993082, 99993084, 99983693, 99679774, 99679777, 99675797, 99613479, 99613482, 99570919, 99570920, 99570923, 99570925, 99570927, 99570929, 99570930, 99570932, 99570935, 99570937, 99562447, 99561483, 99561485, 99387462, 99387464, 99387466, 99387469, 99386230, 99387471, 99387472, 99387474, 99349586, 99355695, 99355697, 99355702, 99355706, 99347432, 99347433, 99347435, 99347440, 99347447, 99347449, 99347451, 99347452, 99347454, 99331722, 99331725, 99331726, 99331729, 99322337, 99322339, 99322341, 99322343, 99049425, 99030316, 99030318, 99030319, 99030328, 99030332, 99030336, 98973484, 98973487, 98973489, 98973491, 98973493, 98973495, 98972125, 98972127, 98972130, 98972132, 98972134, 98972136, 98971214, 98969678, 98969683, 98969687, 98969691, 98969695, 98969697, 98969700, 98969704, 98969709, 98972152, 98966476, 98973059, 98964728, 98964730, 98964731, 98964733, 98964736, 98963461, 98963319, 98963324, 98962470, 98963326, 98963330, 98963333, 98962119, 98963337, 98963339, 98819268, 98819100, 98819102, 98819105, 98819106, 98819109, 98819111, 98819113, 98819115, 98819116, 98691405, 98691408, 98683947, 98691410, 98683496, 98691411, 98683277, 98691413, 98691416, 98683503, 98683509, 98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490, 97904492, 97904493, 97904496, 97904498, 97904499, 97904504, 98196905, 98196906, 97897023, 97897026, 97897027, 97897029, 97897032, 97897034, 97897035, 97870879, 97870918, 97870922, 97870924, 97870928, 97866648, 97870932, 97870937, 97870941, 97870880, 97870884, 97870890, 97870896, 97863145, 97870898, 97870902, 97870905, 97870910, 97870912, 97919519, 97854168, 97853126, 97849807, 97849810, 97784026, 97784029, 97784031, 97784033, 97757282, 97757284, 97757286, 97757287, 97757289, 97757291, 97757294, 97754781, 97754783, 97628380, 97628383, 97628384, 97628386, 97621410, 97620059, 97628388, 97628390, 97628392, 97619056, 97618011, 97619058, 97619060, 97614627, 97614630, 97614632, 97614633, 97614635, 97614637, 97614640, 97614642, 97611674, 97614643, 98135770, 97543437, 97543439, 97537689, 97537692, 97537696, 97290997, 97281365, 97281371, 97281378, 97281383, 97281387, 97281388, 97281393, 97281395, 97233748, 97233761, 97233763, 97233768, 97152095, 97089923, 97089927, 97086465, 97086337, 97086340, 97083935, 97083839, 97083843, 97083845, 97080854, 97073811, 97073813, 97073816, 97073818, 97073820, 97073821, 97073824, 97073825, 97073827, 97233764, 97233767, 97066654, 97066329, 96973928, 96973931, 96973933, 96934372, 96934376, 96934383, 96928763, 96928764, 96914486, 96920374, 96920378, 96912590, 96920382, 96914522, 96920386, 96920390, 96909556, 96913745, 96789823, 96789824, 96789826, 96789829, 96760653, 96760407, 96760409, 96760412, 96760414, 96760416, 96760417, 96760419, 96760421, 96760423, 97564433, 97564435, 97564436, 97564439, 97564441, 97564443, 97564444, 97564447, 97564450, 97564463, 97564464, 97564467, 97564468, 96733128, 96733144, 96733160, 96733164, 96733167, 96709701, 96709707, 96709705, 96701900, 96502192, 96502195, 96494131, 96502196, 96502198, 96502200, 96502202, 96502205, 96502206, 96437978, 96437981, 96437982, 95996428, 95996430, 95996431, 95996434, 95996435, 95996438, 95996439, 95940618, 95934191, 95802907, 95802910, 95802911, 95802914, 95802915, 95802918, 95802920, 95802922, 95802923, 95802926, 97564470, 97564472, 97564474, 97564476, 97564478, 97564489, 97564496, 95799631, 95799625, 95799626, 95799629, 95514509, 95514511, 95514513, 95514515, 95514517, 95514522, 95514526, 95470789, 95470791, 95470793, 95470795, 95437044, 95437046, 95407466, 95405167, 95405169, 95405171, 95405173, 95405174, 95405177, 95405178, 95405180, 95405182, 95405184, 95405187, 95405188, 95405190, 95405193, 95397967, 95130618, 95130620, 95130621, 95130623, 95085095, 95085096, 95085098, 95072721, 95085100, 95072726, 95085103, 95071691, 95071693, 95071699, 95071366, 95071700, 95071702, 95071708, 95071710, 95071712, 95070606, 95071715, 95071728, 95070387, 95022148, 95013360, 95013318, 95013320, 95012688, 95012501, 95012504, 95012506, 95012508, 95012509, 95012512, 95012514, 95012518, 95012531, 94968884, 94968887, 94939562, 94939565, 94939566, 94939569, 94938797, 94939570, 94939573, 94939575, 94939577, 94939578, 94939581, 94806948, 94806949, 94806952, 94806954, 94806960, 94795461, 94795464, 94795465, 94795468, 94791410, 94795469, 94795472, 94671316, 94671318, 94542151, 94542152, 94542154, 94520390, 94520391, 94520394, 94520395, 94520398, 94520400, 94514525, 94514260, 94439439, 94444305, 94444307, 94444310, 94444311, 94444313, 94444315, 94412514, 94412516, 94412519, 94334458, 94334459, 94328843, 94270191, 94090811, 94090813, 93662504, 93630834, 93478334, 93284571, 93159798, 93159800, 93159801, 93159806, 93159809, 93157520, 93157525, 93157528, 93157534, 93157537, 93096447, 93020176, 93013016, 93013018, 93013021, 93013022, 93006019, 93006020, 93005321, 93004942, 93004944, 92931712, 92931715, 92931718, 92810910, 92810912, 92810913, 92810916, 92719529, 92275192, 92034236, 92034237, 92034240, 92032521, 91763748, 91763750, 91757042, 91757043, 91757046, 91757047, 91702765, 91702768, 91702769, 91587380, 91587383, 91587389, 91561832, 91561837, 91561840, 91561842, 91561845, 91480625, 91480627, 91480629, 91220630, 91167918, 91167919, 91148554, 91148556, 91098554, 91098555, 91083720, 91083722, 91050516, 91052172, 91031883, 91031885, 91031886, 91031889, 91031891, 91029942, 91029945, 90766051, 90766053, 90766055, 90766056, 90766058, 90766062, 90766067, 90766069, 90766074, 90677857, 90677860, 90554131, 90502364, 90502366, 90502369, 90502372, 90497175, 90497178, 90433157, 90420437, 90420439, 90403700, 90403702, 90349478, 90349214, 90349215, 90349218, 90349220, 90349222, 90349223, 90349225, 90348032, 90348034, 90348035, 90348038, 90348040, 90339695, 90339697, 90339698, 90339700, 90337570, 90269365, 90227742, 90227744, 90227745, 90227747, 90227749, 90210155, 90210157, 90206675, 90192740, 90192743, 90192744, 90077269, 90077271, 90077274, 90077276, 90073140, 90073144, 90073146, 90073149, 90051341, 90051342, 90014733, 90014736, 90014738, 89970869, 89970871, 89965535, 89965537, 89965539, 89965541, 89835460, 89835462, 89825224, 89825226, 89825227, 89825230, 89815717, 89815718, 89815720, 89815723, 89815724, 89799059, 89799061, 89799063, 89799066, 89799067, 89799070, 89749885, 89749889, 89748803, 89748804, 89748134, 89724745, 89711403, 89620822, 89620824, 89613277, 89613279, 89530812, 89530815, 89530816, 89530819, 89478489, 89463585, 89463587, 89463589, 89463592, 89463593, 89463595, 89463598, 89463600, 89463602, 89463604, 89613291, 89613300, 89613302, 89613304, 89418282, 89418284, 89418286, 89418288, 89418290, 89418294, 89402240, 89401781, 89401042, 89401045, 89401050, 89401054, 89401059, 89401063, 89401069, 89386666, 89383725, 89382643, 89382647, 89366570, 89366572, 89321230, 89321232, 89321234, 89321235, 89321237, 89321239, 89321242, 89321243, 89321245, 89318958, 89292963, 89292966, 89292968, 89292969, 89288737, 89288738, 89288740, 89288743, 89288745, 89285733, 89285734, 89229871, 89229874, 89204461, 89204463, 89204466, 89204467, 89186004, 89186571, 89186573, 89154671, 89154672, 89152685, 89154675, 89154676, 89154679, 89087227, 89087230, 89087231, 89087234, 89087235, 89087237, 89038820, 89015456, 88974518, 88993610, 88971079, 88971080, 88971082, 88971085, 88971087, 88971088, 88971090, 88877348, 88876843, 88876845, 88876846, 88876850, 88876856, 88876858, 88876862, 88875385, 88875386, 88875389, 88875390, 88841327, 88841329, 88841332, 88841334, 88841336, 88841338, 88841339, 88841342, 88841344, 88841346, 89345079, 89345081, 89345082, 88758876, 88758877, 88744574, 88744577, 88744578, 88744580, 88744582, 88744584, 88744586, 88744589, 88744591, 88744593, 88744596, 88744598, 88744601, 88744603, 88630628, 88630630, 88630633, 88619656, 88618982, 88619658, 88619659, 88575890, 88575892, 88575895, 88562939, 88562942, 88562943, 88562946, 88562948, 88562950, 88562952, 88562954, 88559622, 88559624, 88559626, 88559627, 88559630, 88559631, 88559634, 88559636, 88559637, 88559640, 88559642, 88544221, 88489334, 88489338, 88489339, 88489341, 88485986, 88486799, 88486801, 88486803, 88486805, 88486808, 88486810, 88486812, 88486813, 88486816, 88471510, 88452030, 88452033, 88452034, 88452036, 88452039, 88415504, 88415507, 88415508, 88350953, 88350418, 88350234, 88349121, 88350236, 88350238, 88350241, 88350242, 88350244, 88350247, 88347933, 88337240, 88331466, 88331467, 88240611, 88240612, 88221645, 88240617, 88240618, 88240622, 88240625, 88218353, 88218356, 88218357, 88218359, 88218362, 88218363, 88218365, 88218368, 88218376, 88218379, 88218383, 88218386, 88218387, 88218389, 88218391, 88212650, 88212652, 88197278, 88197280, 88196402, 88149587, 88149185, 88146992, 88146994, 87863431, 87863435, 87863438, 87863441, 87863443, 87725049, 87725050, 87708439, 87708441, 87701799, 87701802, 87701803, 87701806, 87701808, 87701809, 87701812, 87701813, 87701816, 87701817, 89345093, 89345107, 87705827, 89345109, 89345111, 89345113, 87688301, 87664669, 87664671, 87664674, 87646985, 87646986, 87646988, 87646991, 87646993, 87634734, 87585838, 87585840, 87585841, 87585844, 87585846, 87585847, 87585849, 87585851, 87585853, 87585856, 87569314, 87569059, 87569060, 87569062, 87569064, 87569066, 87569069, 87569071, 87569072, 87569074, 87445419, 87408825, 87408828, 87331490, 87331494, 87331498, 87331503, 87331510, 87331522, 87331535, 87331536) AND `swars_battles`.`battled_at` >= '2024-08-12 11:22:34'
# >>   ↳ app/models/swars/user/stat/vitality_stat.rb:26:in `block in count'
