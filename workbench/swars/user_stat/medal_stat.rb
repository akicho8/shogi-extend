require "../setup"
tp Swars::User["SugarHuuko"].user_stat.medal_stat.to_debug_hash
_ { Swars::User["SugarHuuko"].user_stat.medal_stat.to_a } # => "76.81 ms"
s { Swars::User["SugarHuuko"].user_stat.medal_stat.to_a } # => [{:message=>"居飛車党", :method=>"raw", :name=>"⬆️", :type=>nil}, {:message=>"右玉で勝った", :method=>"raw", :name=>"🌛", :type=>nil}, {:message=>"UFO銀で勝った", :method=>"raw", :name=>"🛸", :type=>nil}, {:message=>"大駒全部捨てて勝った", :method=>"raw", :name=>"🧠", :type=>nil}, {:message=>"10連勝した", :method=>"raw", :name=>"💮", :type=>nil}, {:message=>"居玉で勝った", :method=>"raw", :name=>"🗿", :type=>nil}, {:message=>"対局放棄と受け取られかねない長考をした", :method=>"raw", :name=>"🚫", :type=>nil}, {:message=>"開幕千日手をした", :method=>"raw", :name=>"❓", :type=>nil}, {:message=>"千日手があった", :method=>"raw", :name=>"🍌", :type=>nil}]

Swars::User["SugarHuuko"].user_stat.win_tag.to_h # => {:力戦=>13, :居飛車=>39, :箱入り娘=>1, :銀雲雀=>1, :舟囲い=>6, :居飛車金美濃=>2, :対振り持久戦=>1, :新型雁木=>5, :相掛かり=>1, :▲４五歩早仕掛け=>2, :居玉=>9, :△３三角型空中戦法=>1, :オールド雁木=>1, :原始棒銀=>5, :UFO銀=>5, :角交換型=>3, :角換わり=>1, :右玉=>2, :手得角交換型=>1, :地下鉄飛車=>1, :三段右玉=>1, :垂れ歩=>11, :対振り=>13, :対抗形=>13, :持久戦=>18, :短手数=>17, :急戦=>18, :長手数=>21, :大駒コンプリート=>7, :相居飛車=>26, :継ぎ桂=>2, :腹銀=>1, :ふんどしの桂=>4, :相居玉=>5, :桂頭の銀=>1, :大駒全ブッチ=>1, :背水の陣=>1}

# >> |---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> |                  対象サンプル数 | 50                                                                                                                                                                                                                                                                                                                                                                           |
# >> |                          勝ち数 | 39                                                                                                                                                                                                                                                                                                                                                                           |
# >> |                          負け数 | 8                                                                                                                                                                                                                                                                                                                                                                            |
# >> |                            勝率 | 0.78                                                                                                                                                                                                                                                                                                                                                                         |
# >> |                    引き分け回数 | 1                                                                                                                                                                                                                                                                                                                                                                            |
# >> |         切れ負け率(分母:負け数) | 0.125                                                                                                                                                                                                                                                                                                                                                                        |
# >> |             切断率(分母:負け数) |                                                                                                                                                                                                                                                                                                                                                                              |
# >> |                        居飛車率 | 1.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |                      振り飛車率 | 0.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |                        居玉勝率 | 0.18                                                                                                                                                                                                                                                                                                                                                                         |
# >> |                    アヒル囲い率 | 0.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |                        嬉野流率 | 0.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |                            棋風 | {:rarity_key_SSR=>0.14, :rarity_key_SR=>0.28, :rarity_key_R=>0.16, :rarity_key_N=>0.42}                                                                                                                                                                                                                                                                                      |
# >> | 1手詰を詰まさないでじらした割合 | 0.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |                絶対投了しない率 | 0.0                                                                                                                                                                                                                                                                                                                                                                          |
# >> |              大長考または放置率 | 0.02                                                                                                                                                                                                                                                                                                                                                                         |
# >> |              棋神降臨疑惑対局数 | 0                                                                                                                                                                                                                                                                                                                                                                            |
# >> |                長考または放置率 | 0.02                                                                                                                                                                                                                                                                                                                                                                         |
# >> |                    最大連勝連敗 | {:lose=>2, :win=>12, :draw=>1}                                                                                                                                                                                                                                                                                                                                               |
# >> |                      タグの重み | {:力戦=>17, :居飛車=>50, :カブト囲い=>1, :箱入り娘=>1, :銀雲雀=>1, :舟囲い=>9, :居飛車金美濃=>2, :対振り持久戦=>1, :新型雁木=>6, :相掛かり=>1, :▲４五歩早仕掛け=>2, :居玉=>11, :△３三角型空中戦法=>1, :ツノ銀雁木=>1, :オールド雁木=>1, :原始棒銀=>5, :UFO銀=>5, :へこみ矢倉=>1, :串カツ囲い=>1, :金盾囲い=>1, :角交換型=>3, :角換わり=>1, :右玉=>3, :手得角交換型=>1, ... |
# >> |---------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >>   Swars::User Load (0.2ms)  SELECT `swars_users`.* FROM `swars_users` WHERE `swars_users`.`user_key` = 'SugarHuuko' LIMIT 1
# >>   ↳ app/models/swars/user.rb:5:in `[]'
# >>   Swars::Membership Ids (19.7ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`user_id` = 17413 ORDER BY `swars_battles`.`battled_at` DESC LIMIT 50
# >>   ↳ app/models/swars/user_stat/base_scope_methods.rb:35:in `scope_ids'
# >>   Swars::Membership Count (0.4ms)  SELECT COUNT(*) FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490)
# >>   ↳ app/models/swars/user_stat/base_scope_methods.rb:45:in `ids_count'
# >>   Swars::Membership Pluck (0.6ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'win'
# >>   ↳ app/models/swars/user_stat/tag_stat.rb:63:in `block in to_h'
# >>   ActsAsTaggableOn::Tag Load (1.5ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership') AND (taggings.taggable_id IN ('97904485','97904490','97904863','97909143','97909144','98191817','98196869','98196872','98196874','98196876','98196878','98196881','98196899','98196901','98196903','98196909','98196911','98196913','98196915','98208928','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264007','98271896','98271900','98271905','98271907','98271911','98271913','98303204')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id
# >>   ↳ app/models/swars/user_stat/tag_stat.rb:64:in `each_with_object'
# >>   Swars::Membership Pluck (0.4ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490)
# >>   ↳ app/models/swars/user_stat/tag_stat.rb:63:in `block in to_h'
# >>   ActsAsTaggableOn::Tag Load (1.6ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership') AND (taggings.taggable_id IN ('97904485','97904487','97904490','97904863','97909143','97909144','98191817','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196909','98196911','98196913','98196915','98208928','98212763','98212766','98212768','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id
# >>   ↳ app/models/swars/user_stat/tag_stat.rb:64:in `each_with_object'
# >>   Swars::Membership Pluck (0.4ms)  SELECT `judges`.`key` FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) ORDER BY FIELD(swars_memberships.id, '98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204','98212763','98212766','98212768','98212769','98212771','98212774','98208928','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196909','98196911','98196913','98196915','98191817','97909143','97909144','97904863','97904485','97904487','97904490')
# >>   ↳ app/models/application_record.rb:69:in `block in custom_belongs_to'
# >>   Swars::Membership Count (0.5ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'win'
# >>   ↳ app/models/swars/user_stat/sub_scope_methods.rb:23:in `win_count'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'win' AND `swars_battles`.`turn_max` = 100
# >>   ↳ app/models/swars/user_stat/main.rb:351:in `block in one_hundred_win_rate'
# >>   Swars::Membership Count (0.5ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose'
# >>   ↳ app/models/swars/user_stat/sub_scope_methods.rb:33:in `lose_count'
# >>   Judge Load (0.2ms)  SELECT `judges`.* FROM `judges` WHERE `judges`.`key` = 'lose' ORDER BY `judges`.`position` ASC LIMIT 1
# >>   ↳ app/models/application_memory_record.rb:22:in `db_record!'
# >>   Swars::Final Load (0.2ms)  SELECT `swars_finals`.* FROM `swars_finals` WHERE `swars_finals`.`key` = 'TIMEOUT' ORDER BY `swars_finals`.`position` ASC LIMIT 1
# >>   ↳ app/models/application_memory_record.rb:22:in `db_record!'
# >>   Swars::Membership Count (0.4ms)  SELECT COUNT(*) AS `count_all`, `judges`.`key` AS `judges_key`, `swars_finals`.`key` AS `swars_finals_key` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) GROUP BY `judges`.`key`, `swars_finals`.`key`
# >>   ↳ app/models/swars/user_stat/judge_final_stat.rb:55:in `block in counts_hash'
# >>   Judge Load (0.2ms)  SELECT `judges`.* FROM `judges` WHERE `judges`.`key` = 'lose' ORDER BY `judges`.`position` ASC LIMIT 1
# >>   ↳ app/models/application_memory_record.rb:22:in `db_record!'
# >>   Swars::Final Load (0.2ms)  SELECT `swars_finals`.* FROM `swars_finals` WHERE `swars_finals`.`key` = 'DISCONNECT' ORDER BY `swars_finals`.`position` ASC LIMIT 1
# >>   ↳ app/models/application_memory_record.rb:22:in `db_record!'
# >>   Swars::Membership Pluck (0.4ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490)
# >>   ↳ app/models/swars/user_stat/rarity_stat.rb:73:in `block in tags'
# >>   ActsAsTaggableOn::Tag Load (1.3ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'attack_tags') AND (taggings.taggable_id IN ('97904485','97904487','97904490','97904863','97909143','97909144','98191817','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196909','98196911','98196913','98196915','98208928','98212763','98212766','98212768','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id
# >>   ↳ app/models/swars/user_stat/rarity_stat.rb:72:in `each'
# >>   Swars::Membership Pluck (0.4ms)  SELECT `swars_memberships`.`id` FROM `swars_memberships` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490)
# >>   ↳ app/models/swars/user_stat/rarity_stat.rb:73:in `block in tags'
# >>   ActsAsTaggableOn::Tag Load (1.3ms)  SELECT tags.*, taggings.tags_count AS count FROM `tags` JOIN (SELECT taggings.tag_id, COUNT(taggings.tag_id) AS tags_count FROM `taggings` WHERE (taggings.taggable_type = 'Swars::Membership' AND taggings.context = 'defense_tags') AND (taggings.taggable_id IN ('97904485','97904487','97904490','97904863','97909143','97909144','98191817','98196869','98196871','98196872','98196874','98196876','98196878','98196881','98196885','98196899','98196901','98196903','98196909','98196911','98196913','98196915','98208928','98212763','98212766','98212768','98212769','98212771','98212774','98212775','98212778','98263994','98263995','98263998','98264000','98264001','98264003','98264005','98264007','98271894','98271896','98271899','98271900','98271902','98271905','98271907','98271909','98271911','98271913','98303204')) GROUP BY `taggings`.`tag_id` HAVING (COUNT(taggings.tag_id) > 0)) AS taggings ON taggings.tag_id = tags.id
# >>   ↳ app/models/swars/user_stat/rarity_stat.rb:72:in `each'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'win' AND `swars_memberships`.`think_last` >= 60 AND `swars_rules`.`key` = 'ten_min' AND `swars_finals`.`key` = 'CHECKMATE'
# >>   ↳ app/models/swars/user_stat/main.rb:257:in `teasing_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'win' AND `swars_memberships`.`think_last` >= 45 AND `swars_rules`.`key` = 'three_min' AND `swars_finals`.`key` = 'CHECKMATE'
# >>   ↳ app/models/swars/user_stat/main.rb:257:in `teasing_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_last` >= 180 AND `swars_rules`.`key` = 'ten_min' AND `swars_finals`.`key` = 'TIMEOUT' AND `swars_battles`.`turn_max` >= 14
# >>   ↳ app/models/swars/user_stat/main.rb:278:in `zettai_toryo_sinai_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_last` >= 60 AND `swars_rules`.`key` = 'three_min' AND `swars_finals`.`key` = 'TIMEOUT' AND `swars_battles`.`turn_max` >= 14
# >>   ↳ app/models/swars/user_stat/main.rb:278:in `zettai_toryo_sinai_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_last` IS NOT NULL AND `swars_memberships`.`think_max` != `swars_memberships`.`think_last` AND `swars_memberships`.`think_max` >= 300 AND `swars_rules`.`key` = 'ten_min' AND `swars_battles`.`turn_max` >= 14
# >>   ↳ app/models/swars/user_stat/main.rb:300:in `taisekimachi_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_last` IS NOT NULL AND `swars_memberships`.`think_max` != `swars_memberships`.`think_last` AND `swars_memberships`.`think_max` >= 120 AND `swars_rules`.`key` = 'three_min' AND `swars_battles`.`turn_max` >= 14
# >>   ↳ app/models/swars/user_stat/main.rb:300:in `taisekimachi_count_for'
# >>   Swars::Membership Count (0.3ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `swars_memberships`.`think_max` >= 180 AND `swars_rules`.`key` = 'ten_min'
# >>   ↳ app/models/swars/user_stat/main.rb:320:in `long_think_count_for'
# >>   Swars::Membership Count (0.3ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `swars_memberships`.`think_max` >= 60 AND `swars_rules`.`key` = 'three_min'
# >>   ↳ app/models/swars/user_stat/main.rb:320:in `long_think_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_max` >= 150 AND `swars_memberships`.`think_max` < 180 AND `swars_rules`.`key` = 'ten_min'
# >>   ↳ app/models/swars/user_stat/main.rb:340:in `short_think_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_rules` ON `swars_rules`.`id` = `swars_battles`.`rule_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND `swars_memberships`.`think_max` >= 30 AND `swars_memberships`.`think_max` < 60 AND `swars_rules`.`key` = 'three_min'
# >>   ↳ app/models/swars/user_stat/main.rb:340:in `short_think_count_for'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` INNER JOIN `swars_finals` ON `swars_finals`.`id` = `swars_battles`.`final_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'lose' AND (`swars_finals`.`key` = 'TORYO' OR `swars_finals`.`key` = 'CHECKMATE') AND `swars_battles`.`turn_max` <= 19
# >>   ↳ app/models/swars/user_stat/lethargy_stat.rb:29:in `block in count'
# >>   Swars::Membership Count (0.5ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'draw'
# >>   ↳ app/models/swars/user_stat/sub_scope_methods.rb:43:in `draw_count'
# >>   Swars::Membership Count (0.8ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'draw' AND `swars_battles`.`turn_max` = 12
# >>   ↳ app/models/swars/user_stat/perpetual_check_stat.rb:18:in `block in opening_repetition_move_count'
# >>   Swars::Membership Count (0.7ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `judges` ON `judges`.`id` = `swars_memberships`.`judge_id` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND `judges`.`key` = 'draw' AND `swars_battles`.`turn_max` >= 50
# >>   ↳ app/models/swars/user_stat/perpetual_check_stat.rb:29:in `block in over50_draw_count'
# >>   Swars::Xmode Load (0.2ms)  SELECT `swars_xmodes`.* FROM `swars_xmodes` ORDER BY `swars_xmodes`.`position` ASC
# >>   ↳ app/models/swars/user_stat/xmode_stat.rb:32:in `each_with_object'
# >>   Swars::Membership Count (0.3ms)  SELECT COUNT(*) AS `count_all`, `swars_battles`.`xmode_id` AS `swars_battles_xmode_id` FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) GROUP BY `swars_battles`.`xmode_id`
# >>   ↳ app/models/swars/user_stat/xmode_stat.rb:27:in `attributes'
# >>   Swars::Membership Count (0.3ms)  SELECT COUNT(*) FROM `swars_memberships` INNER JOIN `swars_battles` ON `swars_battles`.`id` = `swars_memberships`.`battle_id` WHERE `swars_memberships`.`id` IN (98271894, 98271896, 98271899, 98271900, 98271902, 98271905, 98271907, 98271909, 98271911, 98271913, 98303204, 98212763, 98212766, 98212768, 98212769, 98212771, 98212774, 98208928, 98212775, 98212778, 98263994, 98263995, 98263998, 98264000, 98264001, 98264003, 98264005, 98264007, 98196869, 98196871, 98196872, 98196874, 98196876, 98196878, 98196881, 98196885, 98196899, 98196901, 98196903, 98196909, 98196911, 98196913, 98196915, 98191817, 97909143, 97909144, 97904863, 97904485, 97904487, 97904490) AND (`swars_memberships`.`ai_wave_count` >= 3 OR `swars_memberships`.`ai_drop_total` >= 15 OR `swars_memberships`.`ai_two_freq` >= 0.6 AND `swars_battles`.`turn_max` >= 50 OR `swars_memberships`.`ai_gear_freq` >= 0.22 AND `swars_battles`.`turn_max` >= 50)
# >>   ↳ app/models/swars/user_stat/fraud_stat.rb:13:in `count'
