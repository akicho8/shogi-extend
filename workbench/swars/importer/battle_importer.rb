require "./setup"
Swars::Battle["fap34-StarCerisier-20200831_215840"]&.destroy!
battle_importer = Swars::Importer::BattleImporter.new(key: Swars::BattleKey["fap34-StarCerisier-20200831_215840"], skip_if_exist: false)
battle_importer.run
tp battle_importer.battles.first.memberships
# >> [fetch][record] https://shogiwars.heroz.jp/games/fap34-StarCerisier-20200831_215840?locale=ja
# >> |-----------+-----------+---------+----------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+---------------+----------+-------------+----------+-----------------------+--------------------+---------------+---------------------+------------------+---------------------+-------------+------------------+-----------------+--------------------+---------------------------------------------------------|
# >> | id        | battle_id | user_id | grade_id | position | created_at                | updated_at                | grade_diff | think_max | op_user_id | think_last | think_all_avg | think_end_avg | ai_drop_total | judge_id | location_id | style_id | ek_score_without_cond | ek_score_with_cond | ai_wave_count | ai_two_freq         | ai_noizy_two_max | ai_gear_freq        | opponent_id | defense_tag_list | attack_tag_list | technique_tag_list | note_tag_list                                           |
# >> |-----------+-----------+---------+----------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+---------------+----------+-------------+----------+-----------------------+--------------------+---------------+---------------------+------------------+---------------------+-------------+------------------+-----------------+--------------------+---------------------------------------------------------|
# >> | 100028927 |  50132177 |   37812 |        7 |        0 | 2024-07-20 09:55:09 +0900 | 2024-07-20 09:55:09 +0900 |          1 |        58 |     101578 |          6 |             7 |            14 |             0 |        1 |           1 |        1 |                    25 |                    |             0 | 0.23636363636363636 |                3 | 0.01818181818181818 |   100028928 | 高美濃囲い       |                 | 割り打ちの銀       | 振り飛車 大駒コンプリート 対居飛車 対抗形 持久戦 長手数 |
# >> | 100028928 |  50132177 |  101578 |        6 |        1 | 2024-07-20 09:55:09 +0900 | 2024-07-20 09:55:09 +0900 |         -1 |        98 |      37812 |         55 |            10 |            21 |             0 |        2 |           2 |        1 |                     8 |                    |             0 | 0.12727272727272726 |                1 | 0.01818181818181818 |   100028927 | 舟囲い           | 対振り持久戦    |                    | 居飛車 対振り飛車 大駒全ブッチ 対抗形 持久戦 長手数     |
# >> |-----------+-----------+---------+----------+----------+---------------------------+---------------------------+------------+-----------+------------+------------+---------------+---------------+---------------+----------+-------------+----------+-----------------------+--------------------+---------------+---------------------+------------------+---------------------+-------------+------------------+-----------------+--------------------+---------------------------------------------------------|
