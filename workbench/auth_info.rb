require "./setup"

AuthInfo.count                  # => 2
tp AuthInfo
AuthInfo.last.app_logging

# User.count                      # => 5
# count = AuthInfo.count
# success = 0
# error = 0
# AuthInfo.find_each do |record|
#   src = record.meta_info_before_type_cast
#   if src.kind_of?(String)
#     record.meta_info2 = Psych.load(src).as_json
#     record.save!(validate: false)
#     record.reload
#   end
#   if record.meta_info.kind_of?(Hash)
#     success += 1
#   else
#     error += 1
#   end
#   count -= 1
#   p [count, success, error]
# end
# >> |-------+---------+----------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> | id    | user_id | provider | uid                   | meta_info                                                                                                                                                                                                                                                                                                                         | meta_info2                                                                                                                                                                                                                                                                                                                        |
# >> |-------+---------+----------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> | 10960 |      27 | twitter  |    967050880603140096 | {"provider"=>"twitter", "uid"=>"967050880603140096", "info"=>{"name"=>"きなこもち", "email"=>nil, "nickname"=>"sgkinakomochi", "description"=>"将棋がぜんぜん上達しない＆棋譜形式にいちいちうるさい人。千駄ヶ谷道場2級。ウォーズ万年1級。将棋関連のツール集 SHOGI-EXTEND 作ってる", "image"=>"https://pbs.twimg.com/profile_im... | {"provider"=>"twitter", "uid"=>"967050880603140096", "info"=>{"name"=>"きなこもち", "email"=>nil, "nickname"=>"sgkinakomochi", "description"=>"将棋がぜんぜん上達しない＆棋譜形式にいちいちうるさい人。千駄ヶ谷道場2級。ウォーズ万年1級。将棋関連のツール集 SHOGI-EXTEND 作ってる", "image"=>"https://pbs.twimg.com/profile_im... |
# >> | 10963 |      30 | google   | 101367992961344409174 | {"provider"=>"google", "uid"=>"101367992961344409174", "info"=>{"name"=>"Akira Ikeda", "email"=>"pinpon.ikeda@gmail.com", "unverified_email"=>"pinpon.ikeda@gmail.com", "email_verified"=>true, "first_name"=>"Akira", "last_name"=>"Ikeda", "image"=>"https://l...                                                               | {"provider"=>"google", "uid"=>"101367992961344409174", "info"=>{"name"=>"Akira Ikeda", "email"=>"pinpon.ikeda@gmail.com", "unverified_email"=>"pinpon.ikeda@gmail.com", "email_verified"=>true, "first_name"=>"Akira", "last_name"=>"Ikeda", "image"=>"https://l...                                                               |
# >> |-------+---------+----------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
# >> 2024-07-10T11:59:04.613Z pid=90831 tid=21v3 INFO: Sidekiq 7.1.6 connecting to Redis with options {:size=>10, :pool_name=>"internal", :url=>"redis://localhost:6379/4"}
