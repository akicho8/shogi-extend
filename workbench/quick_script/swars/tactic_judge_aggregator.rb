require "./setup"
# scope = Swars::Membership.where(id: Swars::Membership.last(100).collect(&:id))
# QuickScript::Swars::TacticJudgeAggregator.new(scope: scope).cache_write
# tp QuickScript::Swars::TacticJudgeAggregator.new.aggregate[:day60][:records]

QuickScript::Swars::TacticJudgeAggregator.new.cache_write

# >> [2025-04-22 19:12:46][QuickScript::Swars::TacticJudgeAggregator][1週間] Processing relation #0/1
# >> [2025-04-22 19:12:46][QuickScript::Swars::TacticJudgeAggregator][1ヶ月] Processing relation #0/1
# >> [2025-04-22 19:12:46][QuickScript::Swars::TacticJudgeAggregator][2ヶ月] Processing relation #0/1
# >> 2025-04-22T10:12:46.392Z pid=17784 tid=f4g INFO: Sidekiq 7.3.9 connecting to Redis with options {size: 10, pool_name: "internal", url: "redis://localhost:6379/4"}
# >> |----------------------+-----------+---------------------+------------+------------+-----------------------+------------|
# >> | tag_name             | win_count | win_ratio           | draw_count | freq_count | freq_ratio            | lose_count |
# >> |----------------------+-----------+---------------------+------------+------------+-----------------------+------------|
# >> | 力戦                 |         7 |  0.5833333333333334 |          0 |         12 |   0.02197802197802198 |          5 |
# >> | 居玉                 |         6 |  0.4615384615384616 |          0 |         13 |  0.023809523809523808 |          7 |
# >> | 名人に定跡なし       |         7 |                 1.0 |          0 |          7 |   0.01282051282051282 |          0 |
# >> | 居飛車               |        15 |  0.5357142857142857 |          0 |         28 |   0.05128205128205128 |         13 |
# >> | 相居飛車             |         6 |                 0.5 |          0 |         12 |   0.02197802197802198 |          6 |
# >> | 対居飛車             |        13 |  0.4642857142857143 |          0 |         28 |   0.05128205128205128 |         15 |
# >> | 相居玉               |         4 |                 0.5 |          0 |          8 |  0.014652014652014652 |          4 |
# >> | 急戦                 |        13 |                 0.5 |          0 |         26 |  0.047619047619047616 |         13 |
# >> | 短手数               |        18 |                 0.5 |          0 |         36 |   0.06593406593406594 |         18 |
# >> | 大駒全ブッチ         |         1 | 0.14285714285714285 |          0 |          7 |   0.01282051282051282 |          6 |
# >> | 肩銀                 |         1 |                 0.5 |          0 |          2 |  0.003663003663003663 |          1 |
# >> | 頭銀                 |         2 |                 0.4 |          0 |          5 |  0.009157509157509158 |          3 |
# >> | 尻金                 |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 大駒コンプリート     |         6 |  0.8571428571428571 |          0 |          7 |   0.01282051282051282 |          1 |
# >> | 歩頭の桂             |         2 |  0.2857142857142857 |          0 |          7 |   0.01282051282051282 |          5 |
# >> | ふんどしの桂         |         4 |                 0.8 |          0 |          5 |  0.009157509157509158 |          1 |
# >> | 対振り持久戦         |         0 |                 0.0 |          0 |          3 |  0.005494505494505495 |          3 |
# >> | 右四間飛車           |         0 |                 0.0 |          0 |          2 |  0.003663003663003663 |          2 |
# >> | 対振り飛車           |        13 |  0.5416666666666666 |          0 |         24 |   0.04395604395604396 |         11 |
# >> | 対抗形               |        16 |                 0.5 |          0 |         32 |   0.05860805860805861 |         16 |
# >> | 持久戦               |        12 |                 0.5 |          0 |         24 |   0.04395604395604396 |         12 |
# >> | 4手目△3三角戦法     |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 向かい飛車           |         4 |                 0.8 |          0 |          5 |  0.009157509157509158 |          1 |
# >> | 片美濃囲い           |         3 |                 0.6 |          0 |          5 |  0.009157509157509158 |          2 |
# >> | 振り飛車             |        11 |  0.4583333333333333 |          0 |         24 |   0.04395604395604396 |         13 |
# >> | 穴熊の姿焼き         |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 垂れ歩               |         6 |  0.5454545454545454 |          0 |         11 |  0.020146520146520148 |          5 |
# >> | 角換わり腰掛け銀旧型 |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | カブト囲い           |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 角交換型             |         3 |                 0.5 |          0 |          6 |   0.01098901098901099 |          3 |
# >> | 長手数               |         8 |                 0.5 |          0 |         16 |  0.029304029304029304 |          8 |
# >> | 桂頭の銀             |         3 | 0.42857142857142855 |          0 |          7 |   0.01282051282051282 |          4 |
# >> | たたきの歩           |        10 | 0.47619047619047616 |          0 |         21 |  0.038461538461538464 |         11 |
# >> | 頭金                 |         3 |                 0.6 |          0 |          5 |  0.009157509157509158 |          2 |
# >> | 角換わり腰掛け銀     |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 土下座の歩           |         2 |  0.6666666666666666 |          0 |          3 |  0.005494505494505495 |          1 |
# >> | 腹金                 |         4 |                 0.5 |          0 |          8 |  0.014652014652014652 |          4 |
# >> | 肩金                 |         5 |  0.7142857142857143 |          0 |          7 |   0.01282051282051282 |          2 |
# >> | 横歩取り             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 遠見の角             |         0 |                 0.0 |          0 |          3 |  0.005494505494505495 |          3 |
# >> | △4五角戦法          |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 一間竜               |         5 |               0.625 |          0 |          8 |  0.014652014652014652 |          3 |
# >> | 連打の歩             |         2 |                 1.0 |          0 |          2 |  0.003663003663003663 |          0 |
# >> | 左美濃               |         1 |                 0.5 |          0 |          2 |  0.003663003663003663 |          1 |
# >> | 居飛車の税金         |         3 |                 0.6 |          0 |          5 |  0.009157509157509158 |          2 |
# >> | 下段の香             |         0 |                 0.0 |          0 |          2 |  0.003663003663003663 |          2 |
# >> | 控えの桂             |         2 |  0.6666666666666666 |          0 |          3 |  0.005494505494505495 |          1 |
# >> | 裾銀                 |         3 | 0.42857142857142855 |          0 |          7 |   0.01282051282051282 |          4 |
# >> | 四間飛車             |         2 |                0.25 |          0 |          8 |  0.014652014652014652 |          6 |
# >> | 角交換振り飛車       |         0 |                 0.0 |          0 |          3 |  0.005494505494505495 |          3 |
# >> | 美濃囲い             |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 手損角交換型         |         0 |                 0.0 |          0 |          3 |  0.005494505494505495 |          3 |
# >> | 金矢倉               |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 手得角交換型         |         3 |                 1.0 |          0 |          3 |  0.005494505494505495 |          0 |
# >> | こびん攻め           |         2 |  0.2222222222222222 |          0 |          9 |  0.016483516483516484 |          7 |
# >> | 腹銀                 |         1 |                 0.5 |          0 |          2 |  0.003663003663003663 |          1 |
# >> | 逆棒銀               |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | ロケット             |         3 |                 1.0 |          0 |          3 |  0.005494505494505495 |          0 |
# >> | 2段ロケット          |         3 |                 1.0 |          0 |          3 |  0.005494505494505495 |          0 |
# >> | 原始中飛車           |         2 |                 1.0 |          0 |          2 |  0.003663003663003663 |          0 |
# >> | 相振り飛車           |         4 |                 0.5 |          0 |          8 |  0.014652014652014652 |          4 |
# >> | 背水の陣             |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 早石田               |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 袖飛車               |         0 |                 0.0 |          0 |          2 |  0.003663003663003663 |          2 |
# >> | 舟囲いDX             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 米長流急戦矢倉       |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | カニ囲い             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 金頭の桂             |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 金底の歩             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 腰掛け銀             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | ノーマル四間飛車     |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 石田流本組み         |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 嬉野流               |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 位の確保             |         2 |  0.6666666666666666 |          0 |          3 |  0.005494505494505495 |          1 |
# >> | 金無双               |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 舟囲い               |         2 |                 1.0 |          0 |          2 |  0.003663003663003663 |          0 |
# >> | たすきの銀           |         1 |                 0.5 |          0 |          2 |  0.003663003663003663 |          1 |
# >> | 原始棒銀             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 棒銀                 |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 新嬉野流             |         0 |                 0.0 |          0 |          2 |  0.003663003663003663 |          2 |
# >> | 鳥刺し               |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 対穴熊               |         2 |  0.6666666666666666 |          0 |          3 |  0.005494505494505495 |          1 |
# >> | レグスペ             |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 振り飛車穴熊         |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 穴熊                 |         1 |  0.3333333333333333 |          0 |          3 |  0.005494505494505495 |          2 |
# >> | 居飛車金無双         |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 初手▲7八飛戦法      |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 居飛車銀冠           |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 地下鉄飛車           |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 三間飛車             |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 5筋位取り中飛車      |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 中飛車左穴熊         |         1 |                 1.0 |          0 |          1 | 0.0018315018315018315 |          0 |
# >> | 2手目△3ニ飛戦法     |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> | 高美濃囲い           |         0 |                 0.0 |          0 |          1 | 0.0018315018315018315 |          1 |
# >> |----------------------+-----------+---------------------+------------+------------+-----------------------+------------|
