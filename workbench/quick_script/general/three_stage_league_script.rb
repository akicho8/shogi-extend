require "#{__dir__}/setup"
e = QuickScript::General::ThreeStageLeagueScript.new(name_rel: "藤井聡太")
e.target_users                # => #<ActiveRecord::Relation [#<Tsl::User id: 596, name: "藤井聡太", min_age: 13, max_age: 13, memberships_count: 1, runner_up_count: 0, promotion_membership_id: 4375, promotion_generation: 59, min_membership_id: 4375, max_membership_id: 4375, min_generation: 59, max_generation: 59, created_at: "2025-08-13 21:13:21.873688000 +0900", updated_at: "2025-08-13 21:13:21.880354000 +0900">]>
tp e.current_scope
# >> |-----+------------+---------+---------+-------------------+-----------------+-------------------------+----------------------+-------------------+-------------------+----------------+----------------+---------------------------+---------------------------|
# >> | id  | name       | min_age | max_age | memberships_count | runner_up_count | promotion_membership_id | promotion_generation | min_membership_id | max_membership_id | min_generation | max_generation | created_at                | updated_at                |
# >> |-----+------------+---------+---------+-------------------+-----------------+-------------------------+----------------------+-------------------+-------------------+----------------+----------------+---------------------------+---------------------------|
# >> | 598 | 柵木幹太   |      18 |      24 |                14 |               1 |                    4805 |                   72 |              4377 |              4805 |             59 |             72 | 2025-08-13 21:13:21 +0900 | 2025-08-13 21:13:43 +0900 |
# >> | 579 | 冨田誠也   |      17 |      24 |                15 |               0 |                    4632 |                   67 |              4172 |              4632 |             53 |             67 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:35 +0900 |
# >> | 564 | 谷合廣紀   |      18 |      25 |                17 |               1 |                    4583 |                   66 |              4073 |              4583 |             50 |             66 | 2025-08-13 21:13:07 +0900 | 2025-08-13 21:13:33 +0900 |
# >> | 577 | 石川優太   |      18 |      24 |                13 |               1 |                    4547 |                   65 |              4170 |              4547 |             53 |             65 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:31 +0900 |
# >> | 580 | 渡辺和史   |      18 |      24 |                12 |               0 |                    4557 |                   65 |              4206 |              4557 |             54 |             65 | 2025-08-13 21:13:14 +0900 | 2025-08-13 21:13:31 +0900 |
# >> | 573 | 黒田尭之   |      16 |      22 |                12 |               1 |                    4516 |                   64 |              4166 |              4516 |             53 |             64 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:29 +0900 |
# >> | 578 | 出口若武   |      17 |      23 |                12 |               0 |                    4523 |                   64 |              4171 |              4523 |             53 |             64 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:29 +0900 |
# >> | 590 | 本田奎     |      17 |      20 |                 7 |               0 |                    4501 |                   63 |              4315 |              4501 |             57 |             63 | 2025-08-13 21:13:18 +0900 | 2025-08-13 21:13:28 +0900 |
# >> | 593 | 山本博志   |      19 |      21 |                 6 |               0 |                    4483 |                   63 |              4346 |              4483 |             58 |             63 | 2025-08-13 21:13:20 +0900 | 2025-08-13 21:13:28 +0900 |
# >> | 554 | 池永天志   |      16 |      24 |                16 |               0 |                    4446 |                   62 |              3968 |              4446 |             47 |             62 | 2025-08-13 21:13:02 +0900 | 2025-08-13 21:13:26 +0900 |
# >> | 595 | 長谷部浩平 |      21 |      23 |                 4 |               0 |                    4444 |                   62 |              4374 |              4444 |             59 |             62 | 2025-08-13 21:13:21 +0900 | 2025-08-13 21:13:26 +0900 |
# >> | 594 | 斎藤明日斗 |      17 |      18 |                 4 |               0 |                    4418 |                   61 |              4347 |              4418 |             58 |             61 | 2025-08-13 21:13:20 +0900 | 2025-08-13 21:13:24 +0900 |
# >> | 546 | 杉本和陽   |      17 |      25 |                17 |               1 |                    4380 |                   60 |              3874 |              4380 |             44 |             60 | 2025-08-13 21:12:58 +0900 | 2025-08-13 21:13:23 +0900 |
# >> | 543 | 西田拓也   |      17 |      25 |                17 |               1 |                    4383 |                   60 |              3871 |              4383 |             44 |             60 | 2025-08-13 21:12:58 +0900 | 2025-08-13 21:13:23 +0900 |
# >> | 559 | 大橋貴洸   |      18 |      23 |                12 |               1 |                    4349 |                   59 |              4004 |              4349 |             48 |             59 | 2025-08-13 21:13:04 +0900 | 2025-08-13 21:13:21 +0900 |
# >> | 596 | 藤井聡太   |      13 |      13 |                 1 |               0 |                    4375 |                   59 |              4375 |              4375 |             59 |             59 | 2025-08-13 21:13:21 +0900 | 2025-08-13 21:13:21 +0900 |
# >> | 576 | 三田敏弘   |      17 |      26 |                19 |               1 |                         |                      |              4169 |              4761 |             53 |             71 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:41 +0900 |
# >> | 597 | 西山朋佳   |      20 |      25 |                10 |               1 |                         |                      |              4376 |              4659 |             59 |             68 | 2025-08-13 21:13:21 +0900 | 2025-08-13 21:13:36 +0900 |
# >> | 581 | 甲斐日向   |      21 |      25 |                10 |               1 |                         |                      |              4207 |              4479 |             54 |             63 | 2025-08-13 21:13:14 +0900 | 2025-08-13 21:13:27 +0900 |
# >> | 589 | 桝田悠介   |      21 |      25 |                10 |               1 |                         |                      |              4283 |              4565 |             56 |             65 | 2025-08-13 21:13:17 +0900 | 2025-08-13 21:13:31 +0900 |
# >> | 552 | 慶田義法   |      17 |      25 |                17 |               0 |                         |                      |              3966 |              4493 |             47 |             63 | 2025-08-13 21:13:02 +0900 | 2025-08-13 21:13:28 +0900 |
# >> | 565 | 坂井信哉   |      19 |      26 |                15 |               0 |                         |                      |              4104 |              4553 |             51 |             65 | 2025-08-13 21:13:09 +0900 | 2025-08-13 21:13:31 +0900 |
# >> | 584 | 関矢寛之   |      20 |      26 |                13 |               0 |                         |                      |              4210 |              4582 |             54 |             66 | 2025-08-13 21:13:14 +0900 | 2025-08-13 21:13:33 +0900 |
# >> | 591 | 荒田敏史   |      21 |      26 |                10 |               0 |                         |                      |              4316 |              4585 |             57 |             66 | 2025-08-13 21:13:18 +0900 | 2025-08-13 21:13:33 +0900 |
# >> | 592 | 黒川智記   |      22 |      25 |                 7 |               0 |                         |                      |              4317 |              4503 |             57 |             63 | 2025-08-13 21:13:18 +0900 | 2025-08-13 21:13:28 +0900 |
# >> | 572 | 荒木隆     |      22 |      25 |                 7 |               0 |                         |                      |              4165 |              4365 |             53 |             59 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:21 +0900 |
# >> | 587 | 藤田彰一   |      22 |      25 |                 8 |               0 |                         |                      |              4247 |              4447 |             55 |             62 | 2025-08-13 21:13:15 +0900 | 2025-08-13 21:13:26 +0900 |
# >> | 575 | 川崎直人   |      22 |      25 |                 8 |               0 |                         |                      |              4168 |              4400 |             53 |             60 | 2025-08-13 21:13:12 +0900 | 2025-08-13 21:13:23 +0900 |
# >> | 586 | 里見香奈   |      22 |      25 |                 8 |               0 |                         |                      |              4246 |              4463 |             55 |             62 | 2025-08-13 21:13:15 +0900 | 2025-08-13 21:13:26 +0900 |
# >> |-----+------------+---------+---------+-------------------+-----------------+-------------------------+----------------------+-------------------+-------------------+----------------+----------------+---------------------------+---------------------------|
